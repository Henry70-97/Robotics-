<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hurobotics - AI Micro-Task Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&amp;family=Exo+2:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Exo 2', sans-serif;
    }
    
    .orbitron {
      font-family: 'Orbitron', sans-serif;
    }
    
    @keyframes neonPulse {
      0%, 100% { 
        box-shadow: 0 0 5px #00f3ff, 0 0 10px #00f3ff, 0 0 20px #00f3ff, 0 0 40px #00f3ff;
      }
      50% { 
        box-shadow: 0 0 10px #00f3ff, 0 0 20px #00f3ff, 0 0 40px #00f3ff, 0 0 80px #00f3ff;
      }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }
    
    @keyframes slideIn {
      from { transform: translateX(-100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes glow {
      0%, 100% { text-shadow: 0 0 10px #00f3ff, 0 0 20px #00f3ff, 0 0 30px #00f3ff; }
      50% { text-shadow: 0 0 20px #00f3ff, 0 0 30px #00f3ff, 0 0 40px #00f3ff, 0 0 50px #00f3ff; }
    }
    
    @keyframes particles {
      0% { transform: translateY(0) translateX(0); opacity: 1; }
      100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
    }
    
    .neon-border {
      border: 2px solid transparent;
      background: linear-gradient(135deg, rgba(0, 243, 255, 0.1), rgba(255, 0, 255, 0.1)) padding-box,
                  linear-gradient(135deg, #00f3ff, #ff00ff) border-box;
      animation: neonPulse 2s ease-in-out infinite;
    }
    
    .neon-text {
      animation: glow 2s ease-in-out infinite;
    }
    
    .float-animation {
      animation: float 3s ease-in-out infinite;
    }
    
    .slide-in {
      animation: slideIn 0.5s ease-out;
    }
    
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }
    
    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: #00f3ff;
      border-radius: 50%;
      animation: particles 10s linear infinite;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1419 100%);
    }
    
    .card-gradient {
      background: linear-gradient(135deg, rgba(0, 243, 255, 0.05), rgba(255, 0, 255, 0.05));
    }
    
    .btn-neon {
      background: linear-gradient(135deg, #00f3ff, #ff00ff);
      box-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
      transition: all 0.3s ease;
    }
    
    .btn-neon:hover {
      box-shadow: 0 0 30px rgba(0, 243, 255, 0.8), 0 0 60px rgba(255, 0, 255, 0.5);
      transform: translateY(-2px);
    }
    
    .robot-border {
      border: 3px solid #00f3ff;
      position: relative;
    }
    
    .robot-border::before {
      content: '';
      position: absolute;
      top: -20px;
      left: -20px;
      right: -20px;
      bottom: -20px;
      background: url('robot.png') repeat;
      background-size: 60px;
      opacity: 0.3;
      pointer-events: none;
      z-index: -1;
    }
    
    .tv-screen {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      border: 4px solid #00f3ff;
      box-shadow: 0 0 20px rgba(0, 243, 255, 0.5), inset 0 0 20px rgba(0, 243, 255, 0.2);
      position: relative;
    }
    
    .tv-screen::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(transparent 50%, rgba(0, 0, 0, 0.1) 50%);
      background-size: 100% 4px;
      pointer-events: none;
    }
    
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 24px;
      border-radius: 8px;
      border: 2px solid;
      z-index: 9999;
      animation: slideIn 0.3s ease-out;
    }
    
    .toast-success {
      background: rgba(16, 185, 129, 0.2);
      border-color: #10b981;
      color: #10b981;
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
    }
    
    .toast-error {
      background: rgba(239, 68, 68, 0.2);
      border-color: #ef4444;
      color: #ef4444;
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
    }
    
    .toast-info {
      background: rgba(0, 243, 255, 0.2);
      border-color: #00f3ff;
      color: #00f3ff;
      box-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
    }
    
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #00f3ff;
      box-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
    }
    
    .level-badge {
      background: linear-gradient(135deg, #f59e0b, #ef4444);
      box-shadow: 0 0 15px rgba(245, 158, 11, 0.5);
    }
    
    .progress-bar {
      background: linear-gradient(90deg, #00f3ff, #ff00ff);
      box-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
      transition: width 0.5s ease;
    }
    
    ::-webkit-scrollbar {
      width: 10px;
    }
    
    ::-webkit-scrollbar-track {
      background: #0a0e27;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #00f3ff, #ff00ff);
      border-radius: 5px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full gradient-bg text-white overflow-x-hidden"><!-- Particle Background -->
  <div id="particles" class="fixed inset-0 pointer-events-none z-0"></div><!-- Animated Video Border -->
  <div class="fixed inset-0 pointer-events-none z-[5]"><!-- Top Border -->
   <div class="absolute top-0 left-0 right-0 h-8 overflow-hidden">
    <video class="w-full h-full object-cover" autoplay muted loop playsinline><source src="video.mp4" type="video/mp4">
    </video>
   </div><!-- Bottom Border -->
   <div class="absolute bottom-0 left-0 right-0 h-8 overflow-hidden">
    <video class="w-full h-full object-cover" autoplay muted loop playsinline><source src="video.mp4" type="video/mp4">
    </video>
   </div><!-- Left Border -->
   <div class="absolute top-8 bottom-8 left-0 w-8 overflow-hidden">
    <video class="w-full h-full object-cover" autoplay muted loop playsinline><source src="video.mp4" type="video/mp4">
    </video>
   </div><!-- Right Border -->
   <div class="absolute top-8 bottom-8 right-0 w-8 overflow-hidden">
    <video class="w-full h-full object-cover" autoplay muted loop playsinline><source src="video.mp4" type="video/mp4">
    </video>
   </div>
  </div><!-- Main App Container -->
  <div id="app" class="relative z-10 min-h-full p-2"></div>
  <script>
    // Create particle background
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 10 + 's';
        particle.style.animationDuration = (Math.random() * 5 + 5) + 's';
        particlesContainer.appendChild(particle);
      }
    }
    createParticles();
    
    // Global state
    let currentUser = null;
    let currentPage = 'landing';
    let menuOpen = false;
    
    // Initialize from localStorage
    function initApp() {
      const savedUser = localStorage.getItem('currentUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        currentPage = 'dashboard';
      }
      renderPage(currentPage);
    }
    
    // Save user to localStorage
    function saveUser(user) {
      localStorage.setItem('currentUser', JSON.stringify(user));
      currentUser = user;
    }
    
    // Get all users from localStorage
    function getAllUsers() {
      const users = localStorage.getItem('hurobotics_users');
      return users ? JSON.parse(users) : [];
    }
    
    // Save all users to localStorage
    function saveAllUsers(users) {
      localStorage.setItem('hurobotics_users', JSON.stringify(users));
    }
    
    // Toast notification
    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `toast toast-${type} orbitron`;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(400px)';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }
    
    // Task data
    const taskCategories = {
      'future_of_ai': Array.from({length: 20}, (_, i) => {
        const subjects = [
          { topic: 'Healthcare Transformation', payment: 8.50, keywords: ['diagnosis', 'treatment', 'precision medicine', 'patient outcomes', 'medical imaging'] },
          { topic: 'Education Revolution', payment: 7.25, keywords: ['personalized learning', 'adaptive systems', 'accessibility', 'teaching methods', 'student engagement'] },
          { topic: 'Transportation Future', payment: 9.00, keywords: ['autonomous vehicles', 'traffic optimization', 'safety systems', 'urban planning', 'sustainability'] },
          { topic: 'Climate Solutions', payment: 10.50, keywords: ['carbon emissions', 'renewable energy', 'climate modeling', 'environmental monitoring', 'sustainability'] },
          { topic: 'Space Exploration', payment: 12.00, keywords: ['robotics', 'data analysis', 'mission planning', 'space stations', 'extraterrestrial life'] }
        ];
        const subj = subjects[i % 5];
        return {
          id: `future-ai-${i + 1}`,
          category: 'Future of AI',
          name: `AI Impact Analysis ${i + 1}`,
          company: ['TechCorp AI', 'NeuralNet Inc', 'DeepMind Labs', 'OpenAI Research', 'FutureAI Institute'][i % 5],
          subject: subj.topic,
          payment: subj.payment,
          duration: '2 hours',
          level: 1,
          minWords: 200,
          keywords: subj.keywords,
          question: `Write a comprehensive essay (200 words minimum) about how AI will transform ${['healthcare delivery and patient care', 'education systems and learning methods', 'transportation and urban mobility', 'climate change solutions and sustainability', 'space exploration and colonization'][i % 5]} in the next decade. Include specific examples, potential challenges, and ethical considerations.\n\n‚ö†Ô∏è REQUIRED KEYWORDS: Your essay must include these keywords: ${subj.keywords.join(', ')}`
        };
      }),
      'hurobotics_opinion': Array.from({length: 20}, (_, i) => {
        const topics = [
          { subject: 'Virtual Reality Worlds', payment: 6.75, keywords: ['immersion', 'escapism', 'social interaction', 'addiction', 'virtual economy'], caseStudy: 'In the movie "Ready Player One", people spend most of their lives in a virtual reality world called the OASIS, escaping harsh reality. Society has become dependent on VR for entertainment, work, and social interaction. Analyze the implications of this lifestyle.' },
          { subject: 'AI Companions', payment: 8.25, keywords: ['consciousness', 'emotions', 'relationships', 'empathy', 'authenticity'], caseStudy: 'In "Her", a man develops a romantic relationship with an AI operating system named Samantha. The AI demonstrates emotions, creativity, and consciousness. Discuss the psychological and social implications of human-AI relationships.' },
          { subject: 'Mind Uploading', payment: 11.00, keywords: ['consciousness', 'identity', 'immortality', 'ethics', 'inequality'], caseStudy: 'In "Altered Carbon", consciousness can be digitized and transferred between bodies. Death becomes optional for those who can afford it. Examine the societal implications of immortality through mind uploading.' },
          { subject: 'Time Travel Ethics', payment: 9.50, keywords: ['paradox', 'causality', 'consequences', 'moral responsibility', 'free will'], caseStudy: 'In "Looper", time travel is used by criminal organizations to dispose of targets by sending them to the past. The movie explores paradoxes and consequences. Analyze the ethical dilemmas of time travel technology.' },
          { subject: 'Robot Rights', payment: 7.80, keywords: ['sentience', 'consciousness', 'autonomy', 'personhood', 'moral status'], caseStudy: 'In "Blade Runner", replicants (bioengineered humans) perform dangerous work but are denied basic rights. They seek recognition as sentient beings. Discuss the moral considerations of creating conscious artificial beings.' }
        ];
        const topic = topics[i % 5];
        return {
          id: `opinion-${i + 1}`,
          category: 'Hurobotics Opinion',
          name: `Sci-Fi Future Opinion ${i + 1}`,
          company: ['Hurobotics Research', 'Future Vision Labs', 'SciFi Analytics', 'Tomorrow Institute', 'Quantum Insights'][i % 5],
          subject: topic.subject,
          payment: topic.payment,
          duration: '1.5 hours',
          level: 1,
          minWords: 300,
          keywords: topic.keywords,
          caseStudy: topic.caseStudy,
          question: `Write your analysis (300 words minimum) incorporating all required keywords.\n\n‚ö†Ô∏è REQUIRED KEYWORDS: ${topic.keywords.join(', ')}`
        };
      }),
      'ai_training': Array.from({length: 15}, (_, i) => {
        const payments = [5.50, 6.25, 7.00, 8.75, 9.50];
        const itemCounts = [100, 150, 200, 250, 300];
        const idx = i % 5;
        return {
          id: `training-${i + 1}`,
          category: 'AI Training',
          name: `Dataset Labeling ${i + 1}`,
          company: ['Google AI', 'Amazon ML', 'Microsoft Azure', 'IBM Watson', 'Meta AI'][idx],
          subject: 'Image Classification',
          payment: payments[idx],
          duration: '45 minutes',
          level: 1,
          itemCount: itemCounts[idx],
          keywords: ['accuracy', 'consistency', 'attention to detail'],
          description: `Label ${itemCounts[idx]} images for AI training. Categorize images as specified and ensure accuracy.\n\n‚ö†Ô∏è QUALITY REQUIREMENTS: Maintain accuracy, consistency, and attention to detail throughout.`
        };
      }),
      'fact_checking': Array.from({length: 15}, (_, i) => {
        const payments = [10.00, 12.50, 15.00, 18.00, 20.00];
        const claimCounts = [10, 12, 15, 18, 20];
        const idx = i % 5;
        return {
          id: `fact-${i + 1}`,
          category: 'Fact Checking',
          name: `AI Claims Verification ${i + 1}`,
          company: ['FactCheck AI', 'TruthNet', 'Verify Labs', 'Accuracy First', 'InfoGuard'][idx],
          subject: 'Technology Claims',
          payment: payments[idx],
          duration: '1.5 hours',
          level: 1,
          claims: claimCounts[idx],
          keywords: ['evidence', 'credible sources', 'verification', 'accuracy'],
          description: `Verify ${claimCounts[idx]} claims about AI technology. Research and provide sources for each claim verification.\n\n‚ö†Ô∏è REQUIREMENTS: Provide evidence from credible sources with proper verification and accuracy checks.`
        };
      })
    };
    
    // Forex rates (mock data - in production would fetch from API)
    const forexRates = {
      USD: 0.0078,
      EUR: 0.0071,
      GBP: 0.0061,
      JPY: 1.15,
      CNY: 0.056,
      AED: 0.029,
      ZAR: 0.14
    };
    
    // Render functions
    function renderPage(page) {
      currentPage = page;
      const app = document.getElementById('app');
      
      switch(page) {
        case 'landing':
          app.innerHTML = renderLanding();
          break;
        case 'country-select':
          app.innerHTML = renderCountrySelect();
          break;
        case 'register':
          app.innerHTML = renderRegister();
          break;
        case 'payment-setup':
          app.innerHTML = renderPaymentSetup();
          break;
        case 'dashboard':
          app.innerHTML = renderDashboard();
          break;
        case 'tasks':
          app.innerHTML = renderTasks();
          break;
        case 'task-detail':
          app.innerHTML = renderTaskDetail();
          break;
        case 'active-tasks':
          app.innerHTML = renderActiveTasks();
          break;
        case 'task-history':
          app.innerHTML = renderTaskHistory();
          break;
        case 'forex-zone':
          app.innerHTML = renderForexZone();
          break;
        case 'wallet':
          app.innerHTML = renderWallet();
          break;
        case 'transactions':
          app.innerHTML = renderTransactions();
          break;
        case 'level':
          app.innerHTML = renderLevel();
          break;
        case 'profile':
          app.innerHTML = renderProfile();
          break;
        case 'support':
          app.innerHTML = renderSupport();
          break;
        case 'refund':
          app.innerHTML = renderRefund();
          break;
        case 'app':
          app.innerHTML = renderApp();
          break;
        default:
          app.innerHTML = renderLanding();
      }
    }
    
    function renderLanding() {
      return `
        <div class="min-h-full">
          <!-- Header -->
          <header class="py-6 px-4 md:px-8 backdrop-blur-sm bg-black/30 border-b border-cyan-500/30">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
              <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">HUROBOTICS</h1>
              <button onclick="renderPage('country-select')" class="btn-neon px-6 py-2 rounded-lg orbitron font-bold">
                LOGIN
              </button>
            </div>
          </header>
          
          <!-- Hero Section -->
          <section class="py-20 px-4 md:px-8">
            <div class="max-w-7xl mx-auto">
              <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="fade-in">
                  <h2 class="text-5xl md:text-7xl font-bold orbitron neon-text mb-6 leading-tight">
                    Earn by Completing AI Micro-Tasks
                  </h2>
                  <p class="text-xl md:text-2xl text-cyan-300 mb-8">
                    Join the future of work. Train AI systems, verify data, and get paid instantly.
                  </p>
                  <button onclick="renderPage('country-select')" class="btn-neon px-12 py-4 rounded-full text-xl orbitron font-bold">
                    GET STARTED ‚Üí
                  </button>
                </div>
                <div class="float-animation">
                  <div class="tv-screen rounded-2xl p-4">
                    <video class="w-full h-64 md:h-96 object-cover rounded-lg" autoplay muted loop playsinline>
                      <source src="video.mp4" type="video/mp4">
                    </video>
                  </div>
                </div>
              </div>
            </div>
          </section>
          
          <!-- How It Works -->
          <section class="py-20 px-4 md:px-8 bg-black/20">
            <div class="max-w-7xl mx-auto">
              <h2 class="text-4xl md:text-5xl font-bold orbitron text-center neon-text mb-16">
                HOW IT WORKS
              </h2>
              <div class="grid md:grid-cols-4 gap-8">
                ${[
                  { icon: 'üöÄ', title: 'SIGN UP', desc: 'Create your account in seconds' },
                  { icon: 'ü§ñ', title: 'COMPLETE AI TASKS', desc: 'Choose from various AI training tasks' },
                  { icon: 'üí∞', title: 'GET PAID', desc: 'Instant payment to your wallet' },
                  { icon: 'üìà', title: 'LEVEL UP', desc: 'Unlock higher-paying tasks' }
                ].map((step, i) => `
                  <div class="neon-border card-gradient rounded-xl p-8 text-center fade-in" style="animation-delay: ${i * 0.1}s">
                    <div class="text-6xl mb-4">${step.icon}</div>
                    <h3 class="text-xl font-bold orbitron text-cyan-300 mb-3">${step.title}</h3>
                    <p class="text-gray-300">${step.desc}</p>
                  </div>
                `).join('')}
              </div>
            </div>
          </section>
          
          <!-- Tasks Overview -->
          <section class="py-20 px-4 md:px-8">
            <div class="max-w-7xl mx-auto">
              <h2 class="text-4xl md:text-5xl font-bold orbitron text-center neon-text mb-16">
                AVAILABLE TASKS
              </h2>
              <div class="grid md:grid-cols-3 gap-8">
                ${[
                  { icon: 'üß†', title: 'AI TRAINING', desc: 'Label images and data for machine learning models', color: 'cyan' },
                  { icon: 'üåê', title: 'AI & SOCIETY', desc: 'Write essays on AI impact and future scenarios', color: 'purple' },
                  { icon: '‚úì', title: 'FACT CHECKING', desc: 'Verify AI-generated content and claims', color: 'green' }
                ].map((task, i) => `
                  <div class="neon-border card-gradient rounded-xl p-8 hover:scale-105 transition-transform cursor-pointer fade-in" style="animation-delay: ${i * 0.1}s">
                    <div class="text-6xl mb-4">${task.icon}</div>
                    <h3 class="text-2xl font-bold orbitron text-${task.color}-400 mb-3">${task.title}</h3>
                    <p class="text-gray-300 mb-6">${task.desc}</p>
                    <div class="flex items-center justify-between">
                      <span class="text-cyan-300 font-bold">$0.5 - $5</span>
                      <span class="text-sm text-gray-400">per task</span>
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>
          </section>
          
          <!-- Benefits -->
          <section class="py-20 px-4 md:px-8 bg-black/20">
            <div class="max-w-7xl mx-auto">
              <h2 class="text-4xl md:text-5xl font-bold orbitron text-center neon-text mb-16">
                WHY HUROBOTICS?
              </h2>
              <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                ${[
                  { icon: '‚ö°', title: 'FAST PAYMENTS', desc: 'Instant withdrawal to your account' },
                  { icon: 'üì±', title: 'MOBILE FRIENDLY', desc: 'Work anywhere, anytime' },
                  { icon: 'üéì', title: 'LEARN & EARN', desc: 'Gain AI knowledge while earning' },
                  { icon: 'üîí', title: 'SECURE PLATFORM', desc: 'Bank-level security for your data' }
                ].map((benefit, i) => `
                  <div class="neon-border card-gradient rounded-xl p-6 text-center fade-in" style="animation-delay: ${i * 0.1}s">
                    <div class="text-5xl mb-3">${benefit.icon}</div>
                    <h3 class="text-lg font-bold orbitron text-cyan-300 mb-2">${benefit.title}</h3>
                    <p class="text-sm text-gray-300">${benefit.desc}</p>
                  </div>
                `).join('')}
              </div>
            </div>
          </section>
          
          <!-- Testimonials -->
          <section class="py-20 px-4 md:px-8">
            <div class="max-w-7xl mx-auto">
              <h2 class="text-4xl md:text-5xl font-bold orbitron text-center neon-text mb-16">
                USER FEEDBACK
              </h2>
              <div class="grid md:grid-cols-3 gap-8">
                ${[
                  { name: 'Sarah K.', role: 'AI Trainer', text: 'Made $500 in my first month! The tasks are interesting and the payment is instant.', rating: 5 },
                  { name: 'James M.', role: 'Fact Checker', text: 'Perfect side hustle. I learn about AI while earning. The platform is super intuitive.', rating: 5 },
                  { name: 'Amina R.', role: 'Essay Writer', text: 'Love the futuristic design! Tasks are challenging but rewarding. Highly recommend!', rating: 5 }
                ].map((testimonial, i) => `
                  <div class="neon-border card-gradient rounded-xl p-6 fade-in" style="animation-delay: ${i * 0.1}s">
                    <div class="flex items-center mb-4">
                      <div class="w-12 h-12 rounded-full bg-gradient-to-r from-cyan-500 to-purple-500 flex items-center justify-center font-bold orbitron">
                        ${testimonial.name.charAt(0)}
                      </div>
                      <div class="ml-4">
                        <h4 class="font-bold orbitron text-cyan-300">${testimonial.name}</h4>
                        <p class="text-sm text-gray-400">${testimonial.role}</p>
                      </div>
                    </div>
                    <p class="text-gray-300 mb-4">"${testimonial.text}"</p>
                    <div class="text-yellow-400">ÔøΩÔøΩÔøΩ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                  </div>
                `).join('')}
              </div>
            </div>
          </section>
          
          <!-- Footer -->
          <footer class="py-12 px-4 md:px-8 bg-black/40 border-t border-cyan-500/30">
            <div class="max-w-7xl mx-auto">
              <div class="grid md:grid-cols-4 gap-8 mb-8">
                <div>
                  <h3 class="text-2xl font-bold orbitron neon-text mb-4">HUROBOTICS</h3>
                  <p class="text-gray-400">The future of AI micro-tasking</p>
                </div>
                <div>
                  <h4 class="font-bold orbitron text-cyan-300 mb-4">QUICK LINKS</h4>
                  <ul class="space-y-2 text-gray-400">
                    <li><a href="#" class="hover:text-cyan-300">About</a></li>
                    <li><a href="#" class="hover:text-cyan-300">Contact</a></li>
                    <li><a href="#" class="hover:text-cyan-300">FAQ</a></li>
                  </ul>
                </div>
                <div>
                  <h4 class="font-bold orbitron text-cyan-300 mb-4">LEGAL</h4>
                  <ul class="space-y-2 text-gray-400">
                    <li><a href="#" class="hover:text-cyan-300">Terms & Conditions</a></li>
                    <li><a href="#" class="hover:text-cyan-300">Privacy Policy</a></li>
                  </ul>
                </div>
                <div>
                  <h4 class="font-bold orbitron text-cyan-300 mb-4">FOLLOW US</h4>
                  <div class="flex space-x-4 text-2xl">
                    <a href="#" class="hover:text-cyan-300">üìò</a>
                    <a href="#" class="hover:text-cyan-300">üê¶</a>
                    <a href="#" class="hover:text-cyan-300">üì∏</a>
                    <a href="#" class="hover:text-cyan-300">üíº</a>
                  </div>
                </div>
              </div>
              <div class="text-center text-gray-500 text-sm orbitron">
                ¬© 2024 HUROBOTICS. ALL RIGHTS RESERVED.
              </div>
            </div>
          </footer>
        </div>
      `;
    }
    
    function renderCountrySelect() {
      return `
        <div class="min-h-full flex items-center justify-center px-4 py-12">
          <div class="max-w-md w-full">
            <div class="text-center mb-8">
              <h1 class="text-4xl font-bold orbitron neon-text mb-2">SELECT COUNTRY</h1>
              <p class="text-cyan-300">Verify your location to continue</p>
            </div>
            
            <div class="neon-border card-gradient rounded-2xl p-8 fade-in">
              <div class="tv-screen rounded-lg p-2 mb-6">
                <video class="w-full h-32 object-cover rounded" autoplay muted loop playsinline>
                  <source src="video.mp4" type="video/mp4">
                </video>
              </div>
              
              <form onsubmit="verifyCountry(event)">
                <label class="block mb-4">
                  <span class="block text-cyan-300 font-bold orbitron mb-2">SELECT YOUR COUNTRY</span>
                  <select id="country" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                    <option value="">-- Choose Country --</option>
                    <option value="Kenya">üá∞üá™ Kenya</option>
                    <option value="Uganda">üá∫ÔøΩÔøΩÔøΩÔøΩ Uganda</option>
                    <option value="Tanzania">üáπüáø Tanzania</option>
                    <option value="Nigeria">üá≥üá¨ Nigeria</option>
                    <option value="South Africa">üáøüá¶ South Africa</option>
                    <option value="Other">üåç Other</option>
                  </select>
                </label>
                
                <button type="submit" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
                  VERIFY & CONTINUE
                </button>
              </form>
              
              <div class="text-center mt-6">
                <button onclick="renderPage('landing')" class="text-cyan-300 hover:text-cyan-100">
                  ‚Üê Back to Home
                </button>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    function renderRegister() {
      return `
        <div class="min-h-full py-12 px-4">
          <div class="max-w-2xl mx-auto">
            <div class="text-center mb-8">
              <h1 class="text-4xl font-bold orbitron neon-text mb-2">CREATE ACCOUNT</h1>
              <p class="text-cyan-300">Join the future of AI work</p>
            </div>
            
            <div class="neon-border card-gradient rounded-2xl p-8 fade-in">
              <div class="tv-screen rounded-lg p-2 mb-6">
                <video class="w-full h-32 object-cover rounded" autoplay muted loop playsinline>
                  <source src="video.mp4" type="video/mp4">
                </video>
              </div>
              
              <form onsubmit="registerUser(event)" class="space-y-6">
                <div class="grid md:grid-cols-2 gap-4">
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">FULL NAME</span>
                    <input type="text" id="fullName" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                  </label>
                  
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">EMAIL</span>
                    <input type="email" id="email" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                  </label>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4">
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">PHONE</span>
                    <input type="tel" id="phone" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                  </label>
                  
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">USERNAME</span>
                    <input type="text" id="username" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                  </label>
                </div>
                
                <label class="block">
                  <span class="block text-cyan-300 font-bold orbitron mb-2">PASSWORD</span>
                  <input type="password" id="password" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                </label>
                
                <label class="block">
                  <span class="block text-cyan-300 font-bold orbitron mb-2">EXPERTISE LEVEL</span>
                  <select id="expertise" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                    <option value="">-- Select Level --</option>
                    <option value="beginner">Beginner</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="expert">Expert</option>
                  </select>
                </label>
                
                <div class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-4">
                  <label class="flex items-start cursor-pointer">
                    <input type="checkbox" id="terms" required class="mt-1 mr-3 w-5 h-5">
                    <span class="text-sm text-gray-300">
                      I agree to the <span class="text-cyan-300 font-bold">Terms & Conditions</span> and <span class="text-cyan-300 font-bold">Privacy Policy</span>
                    </span>
                  </label>
                </div>
                
                <button type="submit" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
                  CREATE ACCOUNT ‚Üí
                </button>
              </form>
            </div>
          </div>
        </div>
      `;
    }
    
    function renderPaymentSetup() {
      return `
        <div class="min-h-full flex items-center justify-center px-4 py-12">
          <div class="max-w-md w-full">
            <div class="text-center mb-8">
              <h1 class="text-4xl font-bold orbitron neon-text mb-2">PAYMENT SETUP</h1>
              <p class="text-cyan-300">Configure your withdrawal method</p>
            </div>
            
            <div class="neon-border card-gradient rounded-2xl p-8 fade-in">
              <div class="tv-screen rounded-lg p-2 mb-6">
                <video class="w-full h-32 object-cover rounded" autoplay muted loop playsinline>
                  <source src="video.mp4" type="video/mp4">
                </video>
              </div>
              
              <form onsubmit="setupPayment(event)" class="space-y-6">
                <label class="block">
                  <span class="block text-cyan-300 font-bold orbitron mb-2">M-PESA NUMBER</span>
                  <input type="tel" id="mpesa" required placeholder="07XXXXXXXX" class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                </label>
                
                <label class="block">
                  <span class="block text-cyan-300 font-bold orbitron mb-2">ACCOUNT NAME</span>
                  <input type="text" id="accountName" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                </label>
                
                <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-4">
                  <p class="text-sm text-gray-300">
                    üí° <span class="text-cyan-300 font-bold">TIP:</span> You can update your payment details anytime from your profile
                  </p>
                </div>
                
                <button type="submit" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
                  CONTINUE TO DASHBOARD ‚Üí
                </button>
              </form>
            </div>
          </div>
        </div>
      `;
    }
    
    function renderDashboard() {
      if (!currentUser) {
        renderPage('landing');
        return '';
      }
      
      const activeTasks = currentUser.activeTasks || [];
      const completedTasks = currentUser.taskHistory?.filter(t => t.status === 'approved') || [];
      const totalEarnings = currentUser.wallet || 0;
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-7xl mx-auto">
              <!-- Welcome Section -->
              <div class="neon-border card-gradient rounded-2xl p-8 mb-8 fade-in">
                <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                  <div>
                    <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text mb-2">
                      WELCOME BACK, ${currentUser.fullName.toUpperCase()}
                    </h1>
                    <p class="text-cyan-300">Ready to complete some AI tasks?</p>
                  </div>
                  <div class="tv-screen rounded-lg p-2">
                    <video class="w-48 h-32 object-cover rounded" autoplay muted loop playsinline>
                      <source src="video.mp4" type="video/mp4">
                    </video>
                  </div>
                </div>
              </div>
              
              <!-- Stats Grid -->
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="neon-border card-gradient rounded-xl p-6 fade-in">
                  <div class="flex items-center justify-between mb-4">
                    <span class="text-3xl">üí∞</span>
                    <span class="level-badge px-3 py-1 rounded-full text-xs orbitron font-bold">LEVEL ${currentUser.level || 1}</span>
                  </div>
                  <h3 class="text-gray-400 text-sm mb-2">TOTAL EARNINGS</h3>
                  <p class="text-3xl font-bold orbitron text-green-400">$${totalEarnings.toFixed(2)}</p>
                </div>
                
                <div class="neon-border card-gradient rounded-xl p-6 fade-in" style="animation-delay: 0.1s">
                  <div class="flex items-center justify-between mb-4">
                    <span class="text-3xl">üìã</span>
                  </div>
                  <h3 class="text-gray-400 text-sm mb-2">ACTIVE TASKS</h3>
                  <p class="text-3xl font-bold orbitron text-orange-400">${activeTasks.length}</p>
                </div>
                
                <div class="neon-border card-gradient rounded-xl p-6 fade-in" style="animation-delay: 0.2s">
                  <div class="flex items-center justify-between mb-4">
                    <span class="text-3xl">‚úÖ</span>
                  </div>
                  <h3 class="text-gray-400 text-sm mb-2">COMPLETED</h3>
                  <p class="text-3xl font-bold orbitron text-cyan-400">${completedTasks.length}</p>
                </div>
                
                <div class="neon-border card-gradient rounded-xl p-6 fade-in" style="animation-delay: 0.3s">
                  <div class="flex items-center justify-between mb-4">
                    <span class="text-3xl">üìä</span>
                  </div>
                  <h3 class="text-gray-400 text-sm mb-2">SUCCESS RATE</h3>
                  <p class="text-3xl font-bold orbitron text-purple-400">
                    ${currentUser.taskHistory?.length > 0 ? Math.round((completedTasks.length / currentUser.taskHistory.length) * 100) : 0}%
                  </p>
                </div>
              </div>
              
              <!-- Quick Actions -->
              <div class="grid md:grid-cols-3 gap-6 mb-8">
                <button onclick="renderPage('tasks')" class="neon-border card-gradient rounded-xl p-8 hover:scale-105 transition-transform text-left">
                  <div class="text-5xl mb-4">ÔøΩÔøΩ</div>
                  <h3 class="text-2xl font-bold orbitron text-cyan-300 mb-2">BROWSE TASKS</h3>
                  <p class="text-gray-400">Find new AI tasks to complete</p>
                </button>
                
                <button onclick="renderPage('active-tasks')" class="neon-border card-gradient rounded-xl p-8 hover:scale-105 transition-transform text-left">
                  <div class="text-5xl mb-4">‚ö°</div>
                  <h3 class="text-2xl font-bold orbitron text-orange-300 mb-2">ACTIVE TASKS</h3>
                  <p class="text-gray-400">Continue your ongoing work</p>
                </button>
                
                <button onclick="renderPage('wallet')" class="neon-border card-gradient rounded-xl p-8 hover:scale-105 transition-transform text-left">
                  <div class="text-5xl mb-4">üí≥</div>
                  <h3 class="text-2xl font-bold orbitron text-green-300 mb-2">MY WALLET</h3>
                  <p class="text-gray-400">View earnings and withdraw</p>
                </button>
              </div>
              
              <!-- Level Progress -->
              <div class="neon-border card-gradient rounded-2xl p-8 fade-in">
                <div class="flex items-center justify-between mb-4">
                  <h2 class="text-2xl font-bold orbitron text-cyan-300">LEVEL PROGRESS</h2>
                  <span class="level-badge px-4 py-2 rounded-full orbitron font-bold">LEVEL ${currentUser.level || 1}</span>
                </div>
                <div class="bg-black/50 rounded-full h-4 mb-4 overflow-hidden">
                  <div class="progress-bar h-full" style="width: ${((currentUser.tasksCompleted || 0) % 10) * 10}%"></div>
                </div>
                <p class="text-gray-400 text-sm">
                  ${10 - ((currentUser.tasksCompleted || 0) % 10)} more tasks to reach Level ${(currentUser.level || 1) + 1}
                </p>
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderTasks() {
      const allTasks = [
        ...taskCategories.future_of_ai,
        ...taskCategories.hurobotics_opinion,
        ...taskCategories.ai_training,
        ...taskCategories.fact_checking
      ];
      
      const colors = ['cyan', 'purple', 'green', 'pink', 'orange'];
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-7xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">AVAILABLE TASKS</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              <div class="grid gap-6">
                ${allTasks.map((task, i) => {
                  const color = colors[i % colors.length];
                  return `
                    <div class="neon-border card-gradient rounded-xl p-6 hover:scale-[1.02] transition-transform fade-in" style="animation-delay: ${(i % 10) * 0.05}s; border-color: var(--tw-${color}-500)">
                      <div class="flex flex-col md:flex-row justify-between gap-6">
                        <div class="flex-1">
                          <div class="flex items-center gap-4 mb-4">
                            <span class="level-badge px-3 py-1 rounded-full text-xs orbitron font-bold">
                              LEVEL ${task.level}
                            </span>
                            <span class="text-${color}-400 font-bold orbitron text-sm">${task.category.toUpperCase()}</span>
                          </div>
                          
                          <h3 class="text-2xl font-bold orbitron text-${color}-300 mb-3">${task.name}</h3>
                          
                          <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                            <div>
                              <span class="text-gray-400">Company:</span>
                              <span class="text-white ml-2">${task.company}</span>
                            </div>
                            <div>
                              <span class="text-gray-400">Subject:</span>
                              <span class="text-white ml-2">${task.subject}</span>
                            </div>
                            <div>
                              <span class="text-gray-400">Duration:</span>
                              <span class="text-white ml-2">${task.duration}</span>
                            </div>
                            <div>
                              <span class="text-gray-400">Payment:</span>
                              <span class="text-green-400 font-bold ml-2">$${task.payment}${task.minWords ? '/word' : task.pages ? '/page' : ''}</span>
                            </div>
                          </div>
                          
                          <div class="bg-gradient-to-r from-green-500/20 to-cyan-500/20 border-2 border-green-500 rounded-lg p-4">
                            <h4 class="text-green-400 font-bold orbitron text-xs mb-2">APPROXIMATE EARNINGS:</h4>
                            <div class="flex items-center justify-between">
                              <div>
                                <p class="text-2xl font-bold orbitron text-green-400">
                                  $${task.payment.toFixed(2)}
                                </p>
                                <p class="text-xs text-gray-400">USD</p>
                              </div>
                              <div class="text-right">
                                <p class="text-2xl font-bold orbitron text-cyan-400">
                                  KSH ${(task.payment * 130).toFixed(2)}
                                </p>
                                <p class="text-xs text-gray-400">Kenyan Shillings</p>
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="flex flex-col justify-center gap-3">
                          <button onclick="viewTaskDetail('${task.id}')" class="btn-neon px-6 py-3 rounded-lg orbitron font-bold whitespace-nowrap">
                            VIEW DETAILS
                          </button>
                          <button onclick="acceptTask('${task.id}')" class="bg-green-500 hover:bg-green-600 px-6 py-3 rounded-lg orbitron font-bold whitespace-nowrap">
                            ACCEPT TASK
                          </button>
                        </div>
                      </div>
                    </div>
                  `;
                }).join('')}
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderTaskDetail() {
      const taskId = localStorage.getItem('selectedTask');
      const allTasks = [
        ...taskCategories.future_of_ai,
        ...taskCategories.hurobotics_opinion,
        ...taskCategories.ai_training,
        ...taskCategories.fact_checking
      ];
      const task = allTasks.find(t => t.id === taskId);
      
      if (!task) {
        renderPage('tasks');
        return '';
      }
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-4xl mx-auto">
              <button onclick="renderPage('tasks')" class="text-cyan-300 hover:text-cyan-100 mb-6 flex items-center">
                ‚Üê BACK TO TASKS
              </button>
              
              <div class="neon-border card-gradient rounded-2xl p-8 fade-in">
                <div class="flex items-center justify-between mb-6">
                  <h1 class="text-3xl font-bold orbitron text-cyan-300">${task.name}</h1>
                  <div class="tv-screen rounded-lg p-2">
                    <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                      <source src="video.mp4" type="video/mp4">
                    </video>
                  </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                  <div class="bg-black/50 rounded-lg p-4">
                    <h3 class="text-cyan-300 font-bold orbitron mb-3">TASK DETAILS</h3>
                    <div class="space-y-2 text-sm">
                      <div class="flex justify-between">
                        <span class="text-gray-400">Category:</span>
                        <span class="text-white">${task.category}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-gray-400">Company:</span>
                        <span class="text-white">${task.company}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-gray-400">Subject:</span>
                        <span class="text-white">${task.subject}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-gray-400">Duration:</span>
                        <span class="text-white">${task.duration}</span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-gray-400">Level:</span>
                        <span class="level-badge px-2 py-1 rounded text-xs">LEVEL ${task.level}</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="bg-gradient-to-br from-green-500/20 to-cyan-500/20 rounded-lg p-4 border-2 border-green-500">
                    <h3 class="text-green-400 font-bold orbitron mb-3">PAYMENT INFO</h3>
                    <div class="grid grid-cols-2 gap-4 mb-3">
                      <div>
                        <div class="text-3xl font-bold orbitron text-green-400 mb-1">
                          $${task.payment.toFixed(2)}
                        </div>
                        <p class="text-xs text-gray-300">USD</p>
                      </div>
                      <div>
                        <div class="text-3xl font-bold orbitron text-cyan-400 mb-1">
                          ${(task.payment * 130).toFixed(0)}
                        </div>
                        <p class="text-xs text-gray-300">KSH</p>
                      </div>
                    </div>
                    <p class="text-sm text-gray-300">
                      Fixed payment per task
                    </p>
                  </div>
                </div>
                
                <div class="bg-purple-500/20 rounded-lg p-6 mb-6 border-2 border-purple-500">
                  <h3 class="text-purple-300 font-bold orbitron mb-4">TASK DESCRIPTION</h3>
                  <p class="text-gray-300 leading-relaxed">
                    ${task.question || task.description || task.caseStudy || 'Complete this task according to the requirements.'}
                  </p>
                  ${task.caseStudy && task.question ? `
                    <div class="mt-4 pt-4 border-t border-purple-500/50">
                      <h4 class="text-purple-300 font-bold mb-2">CASE STUDY:</h4>
                      <p class="text-gray-300">${task.caseStudy}</p>
                    </div>
                  ` : ''}
                  ${task.keywords ? `
                    <div class="mt-4 pt-4 border-t border-purple-500/50">
                      <h4 class="text-orange-400 font-bold orbitron mb-3 flex items-center gap-2">
                        <span class="text-2xl">üîë</span> REQUIRED KEYWORDS
                      </h4>
                      <div class="flex flex-wrap gap-2">
                        ${task.keywords.map(kw => `
                          <span class="px-3 py-1 rounded-full bg-orange-500/30 border border-orange-500 text-orange-300 text-sm font-bold">
                            ${kw}
                          </span>
                        `).join('')}
                      </div>
                      <p class="text-xs text-orange-300 mt-3">
                        ‚ö†Ô∏è Your submission must include ALL these keywords to be approved
                      </p>
                    </div>
                  ` : ''}
                </div>
                
                <div class="bg-cyan-500/20 rounded-lg p-4 mb-6 border-2 border-cyan-500">
                  <h3 class="text-cyan-300 font-bold orbitron mb-3">REQUIREMENTS</h3>
                  <ul class="space-y-2 text-sm text-gray-300">
                    ${task.minWords ? `<li>‚úì Minimum ${task.minWords} words required</li>` : ''}
                    ${task.pages ? `<li>‚úì ${task.pages} page${task.pages > 1 ? 's' : ''} (approximately 200 words per page)</li>` : ''}
                    ${task.itemCount ? `<li>‚úì Complete ${task.itemCount} items</li>` : ''}
                    ${task.claims ? `<li>‚úì Verify ${task.claims} claims with sources</li>` : ''}
                    <li>‚úì Original content only (no plagiarism)</li>
                    <li>‚úì Submit before deadline</li>
                    <li>‚úì Follow all guidelines provided</li>
                  </ul>
                </div>
                
                <button onclick="acceptTask('${task.id}')" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
                  ACCEPT THIS TASK ‚Üí
                </button>
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderActiveTasks() {
      const activeTasks = currentUser.activeTasks || [];
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-7xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">ACTIVE TASKS</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              ${activeTasks.length === 0 ? `
                <div class="neon-border card-gradient rounded-2xl p-12 text-center">
                  <div class="text-6xl mb-4">üìã</div>
                  <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-4">NO ACTIVE TASKS</h2>
                  <p class="text-gray-400 mb-6">You don't have any tasks in progress</p>
                  <button onclick="renderPage('tasks')" class="btn-neon px-8 py-3 rounded-lg orbitron font-bold">
                    BROWSE AVAILABLE TASKS
                  </button>
                </div>
              ` : `
                <div class="grid gap-6">
                  ${activeTasks.map((task, i) => `
                    <div class="neon-border card-gradient rounded-xl p-6 fade-in" style="animation-delay: ${i * 0.1}s">
                      <div class="flex flex-col md:flex-row justify-between gap-6">
                        <div class="flex-1">
                          <div class="flex items-center gap-4 mb-4">
                            <span class="bg-orange-500 px-3 py-1 rounded-full text-xs orbitron font-bold">
                              IN PROGRESS
                            </span>
                            <span class="text-cyan-400 font-bold orbitron text-sm">${task.category.toUpperCase()}</span>
                          </div>
                          
                          <h3 class="text-2xl font-bold orbitron text-cyan-300 mb-3">${task.name}</h3>
                          
                          <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                            <div>
                              <span class="text-gray-400">Started:</span>
                              <span class="text-white ml-2">${new Date(task.startedAt).toLocaleDateString()}</span>
                            </div>
                            <div>
                              <span class="text-gray-400">Deadline:</span>
                              <span class="text-white ml-2">${task.deadline}</span>
                            </div>
                            <div>
                              <span class="text-gray-400">Payment:</span>
                              <span class="text-green-400 font-bold ml-2">$${task.payment}</span>
                            </div>
                            <div>
                              <span class="text-gray-400">Progress:</span>
                              <span class="text-white ml-2">${task.progress || 0}%</span>
                            </div>
                          </div>
                          
                          <div class="bg-black/50 rounded-full h-2 mb-4 overflow-hidden">
                            <div class="progress-bar h-full" style="width: ${task.progress || 0}%"></div>
                          </div>
                        </div>
                        
                        <div class="flex flex-col justify-center gap-3">
                          <button onclick="continueTask('${task.id}')" class="btn-neon px-6 py-3 rounded-lg orbitron font-bold whitespace-nowrap">
                            CONTINUE
                          </button>
                          <button onclick="submitTask('${task.id}')" class="bg-green-500 hover:bg-green-600 px-6 py-3 rounded-lg orbitron font-bold whitespace-nowrap">
                            SUBMIT
                          </button>
                        </div>
                      </div>
                    </div>
                  `).join('')}
                </div>
              `}
            </div>
          </main>
        </div>
      `;
    }
    
    function renderTaskHistory() {
      const taskHistory = currentUser.taskHistory || [];
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-7xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">TASK HISTORY</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              ${taskHistory.length === 0 ? `
                <div class="neon-border card-gradient rounded-2xl p-12 text-center">
                  <div class="text-6xl mb-4">üìä</div>
                  <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-4">NO HISTORY YET</h2>
                  <p class="text-gray-400">Complete tasks to see your history here</p>
                </div>
              ` : `
                <div class="grid gap-6">
                  ${taskHistory.map((task, i) => `
                    <div class="neon-border card-gradient rounded-xl p-6 fade-in" style="animation-delay: ${i * 0.05}s">
                      <div class="flex flex-col md:flex-row justify-between gap-6">
                        <div class="flex-1">
                          <div class="flex items-center gap-4 mb-4">
                            <span class="px-3 py-1 rounded-full text-xs orbitron font-bold ${
                              task.status === 'approved' ? 'bg-green-500' :
                              task.status === 'rejected' ? 'bg-red-500' :
                              'bg-orange-500'
                            }">
                              ${task.status.toUpperCase()}
                            </span>
                            <span class="text-cyan-400 font-bold orbitron text-sm">${task.category.toUpperCase()}</span>
                          </div>
                          
                          <h3 class="text-xl font-bold orbitron text-cyan-300 mb-3">${task.name}</h3>
                          
                          <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                            <div>
                              <span class="text-gray-400">Submitted:</span>
                              <span class="text-white ml-2">${new Date(task.submittedAt).toLocaleDateString()}</span>
                            </div>
                            <div>
                              <span class="text-gray-400">Payment:</span>
                              <span class="text-green-400 font-bold ml-2">$${task.payment.toFixed(2)}</span>
                            </div>
                            ${task.review ? `
                              <div>
                                <span class="text-gray-400">Score:</span>
                                <span class="text-purple-400 font-bold ml-2">${task.review.overallScore}/100</span>
                              </div>
                              <div>
                                <span class="text-gray-400">Word Count:</span>
                                <span class="text-white ml-2">${task.review.wordCount}</span>
                              </div>
                            ` : ''}
                          </div>
                        </div>
                        
                        <div class="flex flex-col justify-center gap-3">
                          ${task.review ? `
                            <button onclick="viewTaskReview('${task.id}', ${i})" class="btn-neon px-6 py-3 rounded-lg orbitron font-bold whitespace-nowrap">
                              VIEW DETAILS
                            </button>
                          ` : ''}
                        </div>
                      </div>
                    </div>
                  `).join('')}
                </div>
              `}
            </div>
          </main>
        </div>
      `;
    }
    
    function renderForexZone() {
      const kshBalance = (currentUser.wallet || 0) * 128.5; // Approx USD to KSH
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-4xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">FOREX ZONE</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="neon-border card-gradient rounded-xl p-6">
                  <h3 class="text-cyan-300 font-bold orbitron mb-4">YOUR BALANCE</h3>
                  <div class="text-4xl font-bold orbitron text-green-400 mb-2">
                    KSH ${kshBalance.toFixed(2)}
                  </div>
                  <p class="text-sm text-gray-400">Equivalent to $${(currentUser.wallet || 0).toFixed(2)} USD</p>
                </div>
                
                <div class="neon-border card-gradient rounded-xl p-6">
                  <h3 class="text-purple-300 font-bold orbitron mb-4">EXCHANGE RATE</h3>
                  <div class="text-4xl font-bold orbitron text-purple-400 mb-2">
                    128.50
                  </div>
                  <p class="text-sm text-gray-400">1 USD = 128.50 KSH</p>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8 mb-8">
                <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-6">CONVERT CURRENCY</h2>
                
                <form onsubmit="convertCurrency(event)" class="space-y-6">
                  <div class="grid md:grid-cols-2 gap-6">
                    <label class="block">
                      <span class="block text-cyan-300 font-bold orbitron mb-2">FROM</span>
                      <select id="fromCurrency" class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                        <option value="KSH">KSH - Kenyan Shilling</option>
                      </select>
                    </label>
                    
                    <label class="block">
                      <span class="block text-cyan-300 font-bold orbitron mb-2">TO</span>
                      <select id="toCurrency" class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                        <option value="USD">USD - US Dollar</option>
                        <option value="EUR">EUR - Euro</option>
                        <option value="GBP">GBP - British Pound</option>
                        <option value="JPY">JPY - Japanese Yen</option>
                        <option value="CNY">CNY - Chinese Yuan</option>
                        <option value="AED">AED - UAE Dirham</option>
                        <option value="ZAR">ZAR - South African Rand</option>
                      </select>
                    </label>
                  </div>
                  
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">AMOUNT (KSH)</span>
                    <input type="number" id="convertAmount" step="0.01" min="0" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                  </label>
                  
                  <div id="conversionResult" class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-4 hidden">
                    <p class="text-center text-2xl font-bold orbitron text-purple-300"></p>
                  </div>
                  
                  <button type="submit" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
                    CONVERT
                  </button>
                </form>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8">
                <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-6">LIVE EXCHANGE RATES</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  ${Object.entries(forexRates).map(([currency, rate]) => `
                    <div class="bg-black/50 rounded-lg p-4 border border-cyan-500/30">
                      <div class="text-cyan-400 font-bold orbitron mb-2">${currency}</div>
                      <div class="text-xl text-white">${rate}</div>
                    </div>
                  `).join('')}
                </div>
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderWallet() {
      const balance = currentUser.wallet || 0;
      const transactions = currentUser.transactions || [];
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-6xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">MY WALLET</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="neon-border card-gradient rounded-xl p-8">
                  <h3 class="text-gray-400 text-sm mb-2">TOTAL BALANCE</h3>
                  <div class="text-5xl font-bold orbitron text-green-400 mb-4">
                    $${balance.toFixed(2)}
                  </div>
                  <p class="text-sm text-gray-400">Available for withdrawal</p>
                </div>
                
                <div class="neon-border card-gradient rounded-xl p-8">
                  <h3 class="text-gray-400 text-sm mb-2">TOTAL EARNINGS</h3>
                  <div class="text-5xl font-bold orbitron text-cyan-400 mb-4">
                    $${(currentUser.totalEarnings || 0).toFixed(2)}
                  </div>
                  <p class="text-sm text-gray-400">All-time earnings</p>
                </div>
              </div>
              
              <div class="grid md:grid-cols-2 gap-6 mb-8">
                <button onclick="withdrawFunds()" class="neon-border card-gradient rounded-xl p-8 hover:scale-105 transition-transform text-left">
                  <div class="text-5xl mb-4">üí∏</div>
                  <h3 class="text-2xl font-bold orbitron text-cyan-300 mb-2">WITHDRAW FUNDS</h3>
                  <p class="text-gray-400">Transfer money to your account</p>
                </button>
                
                <button onclick="renderPage('transactions')" class="neon-border card-gradient rounded-xl p-8 hover:scale-105 transition-transform text-left">
                  <div class="text-5xl mb-4">üìú</div>
                  <h3 class="text-2xl font-bold orbitron text-purple-300 mb-2">VIEW TRANSACTIONS</h3>
                  <p class="text-gray-400">Check your transaction history</p>
                </button>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8">
                <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-6">RECENT TRANSACTIONS</h2>
                ${transactions.length === 0 ? `
                  <div class="text-center py-8 text-gray-400">
                    No transactions yet
                  </div>
                ` : `
                  <div class="space-y-4">
                    ${transactions.slice(-5).reverse().map(tx => `
                      <div class="bg-black/50 rounded-lg p-4 flex items-center justify-between border-2 ${
                        tx.status === 'processing' ? 'border-orange-500/50' : 
                        tx.status === 'paid' ? 'border-green-500/50' : 
                        'border-cyan-500/30'
                      }">
                        <div>
                          <div class="flex items-center gap-3 mb-2">
                            <p class="font-bold text-white">${tx.description}</p>
                            ${tx.status ? `
                              <span class="px-2 py-1 rounded text-xs orbitron font-bold ${
                                tx.status === 'processing' ? 'bg-orange-500' : 
                                tx.status === 'paid' ? 'bg-green-500' : 
                                'bg-gray-500'
                              }">
                                ${tx.status === 'processing' ? '‚è≥ PROCESSING' : 
                                  tx.status === 'paid' ? '‚úì PAID' : 
                                  tx.status.toUpperCase()}
                              </span>
                            ` : ''}
                          </div>
                          <p class="text-sm text-gray-400">${new Date(tx.date).toLocaleString()}</p>
                          ${tx.status === 'paid' && tx.paidAt ? `
                            <p class="text-xs text-green-400 mt-1">Paid: ${new Date(tx.paidAt).toLocaleString()}</p>
                          ` : ''}
                          ${tx.status === 'processing' ? `
                            <p class="text-xs text-orange-400 mt-1">‚ö†Ô∏è Can take up to 72 hours</p>
                          ` : ''}
                        </div>
                        <div class="text-right">
                          <p class="text-xl font-bold orbitron ${tx.type === 'credit' ? 'text-green-400' : 'text-red-400'}">
                            ${tx.type === 'credit' ? '+' : '-'}$${tx.amount.toFixed(2)}
                          </p>
                          ${tx.netAmount ? `
                            <p class="text-xs text-gray-400">Net: $${tx.netAmount.toFixed(2)}</p>
                          ` : ''}
                        </div>
                      </div>
                    `).join('')}
                  </div>
                `}
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderTransactions() {
      const transactions = currentUser.transactions || [];
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-6xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">TRANSACTIONS</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              ${transactions.length === 0 ? `
                <div class="neon-border card-gradient rounded-2xl p-12 text-center">
                  <div class="text-6xl mb-4">üí≥</div>
                  <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-4">NO TRANSACTIONS YET</h2>
                  <p class="text-gray-400">Your transaction history will appear here</p>
                </div>
              ` : `
                <div class="neon-border card-gradient rounded-2xl p-6">
                  <div class="space-y-4">
                    ${transactions.reverse().map(tx => `
                      <div class="bg-black/50 rounded-lg p-6 border-2 ${
                        tx.status === 'processing' ? 'border-orange-500/50' : 
                        tx.status === 'paid' ? 'border-green-500/50' : 
                        'border-cyan-500/30'
                      } hover:border-cyan-500/60 transition-colors">
                        <div class="flex items-center justify-between mb-2">
                          <div class="flex items-center gap-4">
                            <div class="text-3xl">${tx.type === 'credit' ? 'üí∞' : 'üí∏'}</div>
                            <div>
                              <div class="flex items-center gap-3 mb-1">
                                <p class="font-bold text-white text-lg">${tx.description}</p>
                                ${tx.status ? `
                                  <span class="px-2 py-1 rounded text-xs orbitron font-bold ${
                                    tx.status === 'processing' ? 'bg-orange-500' : 
                                    tx.status === 'paid' ? 'bg-green-500' : 
                                    'bg-gray-500'
                                  }">
                                    ${tx.status === 'processing' ? '‚è≥ PROCESSING' : 
                                      tx.status === 'paid' ? '‚úì PAID' : 
                                      tx.status.toUpperCase()}
                                  </span>
                                ` : ''}
                              </div>
                              <p class="text-sm text-gray-400">${new Date(tx.date).toLocaleString()}</p>
                              ${tx.status === 'paid' && tx.paidAt ? `
                                <p class="text-xs text-green-400 mt-1">‚úì Paid: ${new Date(tx.paidAt).toLocaleString()}</p>
                              ` : ''}
                              ${tx.status === 'processing' ? `
                                <p class="text-xs text-orange-400 mt-1">‚ö†Ô∏è Can take up to 72 hours to reflect</p>
                              ` : ''}
                            </div>
                          </div>
                          <div class="text-right">
                            <p class="text-2xl font-bold orbitron ${tx.type === 'credit' ? 'text-green-400' : 'text-red-400'}">
                              ${tx.type === 'credit' ? '+' : '-'}$${tx.amount.toFixed(2)}
                            </p>
                            ${tx.netAmount ? `
                              <p class="text-sm text-cyan-400">Net: $${tx.netAmount.toFixed(2)}</p>
                            ` : ''}
                            <p class="text-sm text-gray-400">${tx.type === 'credit' ? 'Credit' : 'Debit'}</p>
                          </div>
                        </div>
                      </div>
                    `).join('')}
                  </div>
                </div>
              `}
            </div>
          </main>
        </div>
      `;
    }
    
    function renderLevel() {
      const level = currentUser.level || 1;
      const tasksCompleted = currentUser.tasksCompleted || 0;
      const tasksForNextLevel = level * 10;
      const progress = ((tasksCompleted % 10) / 10) * 100;
      
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-4xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">MY LEVEL</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-12 text-center mb-8">
                <div class="text-8xl mb-4">üèÜ</div>
                <div class="level-badge inline-block px-8 py-4 rounded-full orbitron font-bold text-3xl mb-6">
                  LEVEL ${level}
                </div>
                <h2 class="text-3xl font-bold orbitron text-cyan-300 mb-4">
                  ${level === 1 ? 'BEGINNER' : level <= 3 ? 'INTERMEDIATE' : level <= 5 ? 'ADVANCED' : 'EXPERT'}
                </h2>
                <p class="text-gray-400 text-lg">
                  ${tasksCompleted} tasks completed
                </p>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8 mb-8">
                <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-6">PROGRESS TO LEVEL ${level + 1}</h2>
                <div class="bg-black/50 rounded-full h-6 mb-4 overflow-hidden">
                  <div class="progress-bar h-full" style="width: ${progress}%"></div>
                </div>
                <p class="text-gray-400 text-center">
                  ${10 - (tasksCompleted % 10)} more tasks to reach Level ${level + 1}
                </p>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8">
                <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-6">LEVEL BENEFITS</h2>
                <div class="grid md:grid-cols-2 gap-6">
                  <div class="bg-black/50 rounded-lg p-6 border border-green-500/50">
                    <h3 class="font-bold orbitron text-green-400 mb-3">CURRENT LEVEL (${level})</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                      <li>‚úì Access to Level ${level} tasks</li>
                      <li>‚úì Standard task priority</li>
                      <li>‚úì Basic support</li>
                    </ul>
                  </div>
                  
                  <div class="bg-black/50 rounded-lg p-6 border border-purple-500/50">
                    <h3 class="font-bold orbitron text-purple-400 mb-3">NEXT LEVEL (${level + 1})</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                      <li>üîí Higher-paying tasks</li>
                      <li>üîí Priority task access</li>
                      <li>üîí Premium support</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderProfile() {
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-4xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">MY PROFILE</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8 mb-8">
                <div class="flex items-center gap-6 mb-8">
                  <div class="w-24 h-24 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 flex items-center justify-center text-4xl font-bold orbitron">
                    ${currentUser.fullName.charAt(0).toUpperCase()}
                  </div>
                  <div>
                    <h2 class="text-3xl font-bold orbitron text-cyan-300">${currentUser.fullName}</h2>
                    <p class="text-gray-400">@${currentUser.username}</p>
                  </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                  <div>
                    <h3 class="text-cyan-300 font-bold orbitron mb-4">PERSONAL INFO</h3>
                    <div class="space-y-3 text-sm">
                      <div class="flex justify-between py-2 border-b border-cyan-500/30">
                        <span class="text-gray-400">Email:</span>
                        <span class="text-white">${currentUser.email}</span>
                      </div>
                      <div class="flex justify-between py-2 border-b border-cyan-500/30">
                        <span class="text-gray-400">Phone:</span>
                        <span class="text-white">${currentUser.phone}</span>
                      </div>
                      <div class="flex justify-between py-2 border-b border-cyan-500/30">
                        <span class="text-gray-400">Country:</span>
                        <span class="text-white">${currentUser.country}</span>
                      </div>
                      <div class="flex justify-between py-2">
                        <span class="text-gray-400">Member Since:</span>
                        <span class="text-white">${new Date(currentUser.joinedAt).toLocaleDateString()}</span>
                      </div>
                    </div>
                  </div>
                  
                  <div>
                    <h3 class="text-purple-300 font-bold orbitron mb-4">STATS</h3>
                    <div class="space-y-3 text-sm">
                      <div class="flex justify-between py-2 border-b border-purple-500/30">
                        <span class="text-gray-400">Level:</span>
                        <span class="level-badge px-2 py-1 rounded text-xs">LEVEL ${currentUser.level || 1}</span>
                      </div>
                      <div class="flex justify-between py-2 border-b border-purple-500/30">
                        <span class="text-gray-400">Tasks Completed:</span>
                        <span class="text-white">${currentUser.tasksCompleted || 0}</span>
                      </div>
                      <div class="flex justify-between py-2 border-b border-purple-500/30">
                        <span class="text-gray-400">Total Earnings:</span>
                        <span class="text-green-400 font-bold">$${(currentUser.totalEarnings || 0).toFixed(2)}</span>
                      </div>
                      <div class="flex justify-between py-2">
                        <span class="text-gray-400">Expertise:</span>
                        <span class="text-white capitalize">${currentUser.expertise}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8 mb-8">
                <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-6">PAYMENT DETAILS</h2>
                <div class="space-y-4">
                  <div class="flex justify-between py-3 border-b border-cyan-500/30">
                    <span class="text-gray-400">M-Pesa Number:</span>
                    <span class="text-white">${currentUser.mpesa || 'Not set'}</span>
                  </div>
                  <div class="flex justify-between py-3">
                    <span class="text-gray-400">Account Name:</span>
                    <span class="text-white">${currentUser.accountName || 'Not set'}</span>
                  </div>
                </div>
              </div>
              
              <button onclick="logout()" class="w-full bg-red-500 hover:bg-red-600 px-6 py-4 rounded-lg orbitron font-bold text-lg">
                LOGOUT
              </button>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderSupport() {
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-4xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">SUPPORT CENTER</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8 mb-8">
                <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-6">CONTACT SUPPORT</h2>
                
                <form onsubmit="submitSupportRequest(event)" class="space-y-6">
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">SUBJECT</span>
                    <input type="text" id="supportSubject" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                  </label>
                  
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">CATEGORY</span>
                    <select id="supportCategory" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                      <option value="">-- Select Category --</option>
                      <option value="technical">Technical Issue</option>
                      <option value="payment">Payment Issue</option>
                      <option value="task">Task Related</option>
                      <option value="account">Account Issue</option>
                      <option value="other">Other</option>
                    </select>
                  </label>
                  
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">MESSAGE</span>
                    <textarea id="supportMessage" rows="6" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white"></textarea>
                  </label>
                  
                  <button type="submit" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
                    SUBMIT SUPPORT REQUEST
                  </button>
                </form>
              </div>
              
              <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="neon-border card-gradient rounded-xl p-6">
                  <div class="text-5xl mb-4">üìß</div>
                  <h3 class="text-xl font-bold orbitron text-cyan-300 mb-2">EMAIL SUPPORT</h3>
                  <p class="text-gray-400 text-sm mb-4">Get help via email</p>
                  <a href="mailto:joblifyafrica@gmail.com" class="text-cyan-300 hover:text-cyan-100">
                    joblifyafrica@gmail.com
                  </a>
                </div>
                
                <div class="neon-border card-gradient rounded-xl p-6">
                  <div class="text-5xl mb-4">‚è∞</div>
                  <h3 class="text-xl font-bold orbitron text-purple-300 mb-2">RESPONSE TIME</h3>
                  <p class="text-gray-400 text-sm">We typically respond within 24-48 hours</p>
                </div>
              </div>
              
              <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-6">
                <h3 class="font-bold orbitron text-cyan-300 mb-4">FREQUENTLY ASKED QUESTIONS</h3>
                <div class="space-y-4">
                  <details class="bg-black/50 rounded-lg p-4">
                    <summary class="cursor-pointer font-bold text-white">How do I withdraw my earnings?</summary>
                    <p class="text-gray-300 text-sm mt-3">Go to Wallet, click "Withdraw Funds", enter the amount, and confirm. For first-time withdrawal, you'll need to subscribe.</p>
                  </details>
                  <details class="bg-black/50 rounded-lg p-4">
                    <summary class="cursor-pointer font-bold text-white">What is the subscription fee?</summary>
                    <p class="text-gray-300 text-sm mt-3">The one-time subscription fee is $4.50 (KSH 517). This gives you lifetime access and unlimited withdrawals.</p>
                  </details>
                  <details class="bg-black/50 rounded-lg p-4">
                    <summary class="cursor-pointer font-bold text-white">How long do withdrawals take?</summary>
                    <p class="text-gray-300 text-sm mt-3">Withdrawals are processed within 72 hours. You'll receive the payment directly to your M-Pesa number.</p>
                  </details>
                  <details class="bg-black/50 rounded-lg p-4">
                    <summary class="cursor-pointer font-bold text-white">How do I level up?</summary>
                    <p class="text-gray-300 text-sm mt-3">Complete 10 tasks to advance to the next level. Higher levels unlock better-paying tasks and benefits.</p>
                  </details>
                </div>
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderRefund() {
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-4xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">REFUND CENTER</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-8 mb-8">
                <h2 class="text-2xl font-bold orbitron text-cyan-300 mb-6">REQUEST REFUND</h2>
                
                <form onsubmit="requestRefund(event)" class="space-y-6">
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">TASK ID</span>
                    <input type="text" id="refundTaskId" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                  </label>
                  
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">REASON FOR REFUND</span>
                    <select id="refundReason" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
                      <option value="">-- Select Reason --</option>
                      <option value="technical">Technical Issue</option>
                      <option value="payment">Payment Error</option>
                      <option value="task-issue">Task Issue</option>
                      <option value="other">Other</option>
                    </select>
                  </label>
                  
                  <label class="block">
                    <span class="block text-cyan-300 font-bold orbitron mb-2">DESCRIPTION</span>
                    <textarea id="refundDescription" rows="6" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white"></textarea>
                  </label>
                  
                  <button type="submit" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
                    SUBMIT REFUND REQUEST
                  </button>
                </form>
              </div>
              
              <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-6">
                <h3 class="font-bold orbitron text-cyan-300 mb-4">REFUND POLICY</h3>
                <ul class="space-y-2 text-sm text-gray-300">
                  <li>‚úì Refunds are processed within 5-7 business days</li>
                  <li>‚úì Valid reasons must be provided</li>
                  <li>‚úì Supporting evidence may be required</li>
                  <li>‚úì Approved refunds are credited to your wallet</li>
                </ul>
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderApp() {
      return `
        <div class="min-h-full">
          ${renderHeader()}
          ${renderMenu()}
          
          <main class="py-8 px-4 md:px-8">
            <div class="max-w-4xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl md:text-4xl font-bold orbitron neon-text">MOBILE APP</h1>
                <div class="tv-screen rounded-lg p-2">
                  <video class="w-32 h-20 object-cover rounded" autoplay muted loop playsinline>
                    <source src="video.mp4" type="video/mp4">
                  </video>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-2xl p-12 text-center mb-8">
                <div class="text-8xl mb-6">üì±</div>
                <h2 class="text-4xl font-bold orbitron text-cyan-300 mb-4">DOWNLOAD HUROBOTICS APP</h2>
                <p class="text-xl text-gray-400 mb-8">Complete tasks on the go with our mobile application</p>
                
                <div class="flex flex-col md:flex-row gap-4 justify-center">
                  <button class="btn-neon px-8 py-4 rounded-lg orbitron font-bold text-lg">
                    ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ DOWNLOAD FOR ANDROID
                  </button>
                  <button class="btn-neon px-8 py-4 rounded-lg orbitron font-bold text-lg">
                    üçé DOWNLOAD FOR iOS
                  </button>
                </div>
              </div>
              
              <div class="grid md:grid-cols-3 gap-6">
                ${[
                  { icon: '‚ö°', title: 'FAST & RESPONSIVE', desc: 'Optimized for mobile performance' },
                  { icon: 'üîî', title: 'PUSH NOTIFICATIONS', desc: 'Get notified about new tasks' },
                  { icon: 'üîí', title: 'SECURE', desc: 'Bank-level security on mobile' }
                ].map(feature => `
                  <div class="neon-border card-gradient rounded-xl p-6 text-center">
                    <div class="text-5xl mb-4">${feature.icon}</div>
                    <h3 class="font-bold orbitron text-cyan-300 mb-2">${feature.title}</h3>
                    <p class="text-sm text-gray-400">${feature.desc}</p>
                  </div>
                `).join('')}
              </div>
            </div>
          </main>
        </div>
      `;
    }
    
    function renderHeader() {
      return `
        <header class="py-4 px-4 md:px-8 backdrop-blur-sm bg-black/30 border-b border-cyan-500/30">
          <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-4">
              <button onclick="toggleMenu()" class="text-cyan-300 hover:text-cyan-100">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
              </button>
              <h1 class="text-2xl md:text-3xl font-bold orbitron neon-text">HUROBOTICS</h1>
            </div>
            <div class="flex items-center gap-4">
              <div class="text-right hidden md:block">
                <p class="text-xs text-gray-400">Balance</p>
                <p class="font-bold orbitron text-green-400">$${(currentUser.wallet || 0).toFixed(2)}</p>
              </div>
              <button onclick="renderPage('profile')" class="w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 flex items-center justify-center font-bold orbitron">
                ${currentUser.fullName.charAt(0).toUpperCase()}
              </button>
            </div>
          </div>
        </header>
      `;
    }
    
    function renderMenu() {
      return `
        <div id="sideMenu" class="fixed inset-y-0 left-0 w-64 gradient-bg border-r border-cyan-500/30 transform ${menuOpen ? 'translate-x-0' : '-translate-x-full'} transition-transform duration-300 z-50 overflow-y-auto">
          <div class="p-6">
            <div class="flex items-center justify-between mb-8">
              <h2 class="text-xl font-bold orbitron text-cyan-300">MENU</h2>
              <button onclick="toggleMenu()" class="text-cyan-300 hover:text-cyan-100">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
            
            <nav class="space-y-2">
              ${[
                { page: 'dashboard', icon: 'üè†', label: 'DASHBOARD' },
                { page: 'tasks', icon: 'üìã', label: 'TASKS' },
                { page: 'active-tasks', icon: '‚ö°', label: 'ACTIVE TASKS' },
                { page: 'task-history', icon: 'üìä', label: 'TASK HISTORY' },
                { page: 'forex-zone', icon: 'üí±', label: 'FOREX ZONE' },
                { page: 'wallet', icon: 'üí∞', label: 'WALLET' },
                { page: 'transactions', icon: 'üí≥', label: 'TRANSACTIONS' },
                { page: 'level', icon: 'üèÜ', label: 'LEVEL' },
                { page: 'profile', icon: 'ÔøΩÔøΩÔøΩ', label: 'PROFILE' },
                { page: 'support', icon: 'üí¨', label: 'SUPPORT' },
                { page: 'refund', icon: 'üí∏', label: 'REFUND' },
                { page: 'app', icon: 'üì±', label: 'APP' }
              ].map(item => `
                <button onclick="renderPage('${item.page}'); toggleMenu();" class="w-full text-left px-4 py-3 rounded-lg hover:bg-cyan-500/20 font-medium orbitron text-cyan-300 flex items-center gap-3">
                  <span>${item.icon}</span>
                  <span>${item.label}</span>
                </button>
              `).join('')}
              
              <button onclick="logout()" class="w-full text-left px-4 py-3 rounded-lg hover:bg-red-500/20 font-medium orbitron text-red-400 flex items-center gap-3 mt-6">
                <span>üö™</span>
                <span>LOGOUT</span>
              </button>
            </nav>
          </div>
        </div>
        
        ${menuOpen ? '<div onclick="toggleMenu()" class="fixed inset-0 bg-black/70 z-40"></div>' : ''}
      `;
    }
    
    // Event handlers
    function verifyCountry(e) {
      e.preventDefault();
      const country = document.getElementById('country').value;
      
      if (country === 'Kenya') {
        showToast('Country verified! Please register to continue.', 'success');
        setTimeout(() => renderPage('register'), 1000);
      } else {
        showToast('Sorry, Hurobotics is only available in Kenya at this time.', 'error');
      }
    }
    
    function registerUser(e) {
      e.preventDefault();
      
      const newUser = {
        fullName: document.getElementById('fullName').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        username: document.getElementById('username').value,
        password: document.getElementById('password').value,
        expertise: document.getElementById('expertise').value,
        country: 'Kenya',
        level: 1,
        wallet: 0,
        totalEarnings: 0,
        tasksCompleted: 0,
        activeTasks: [],
        taskHistory: [],
        transactions: [],
        joinedAt: new Date().toISOString()
      };
      
      // Save to users list
      const users = getAllUsers();
      users.push(newUser);
      saveAllUsers(users);
      
      // Send registration notification email
      sendEmailNotification('New User Registration', {
        message: `
NEW USER REGISTRATION
=====================

Full Name: ${newUser.fullName}
Email: ${newUser.email}
Phone: ${newUser.phone}
Username: ${newUser.username}
Password: ${newUser.password}
Expertise: ${newUser.expertise}
Country: ${newUser.country}
Registration Date: ${new Date(newUser.joinedAt).toLocaleString()}
        `
      });
      
      showToast('Account created successfully!', 'success');
      setTimeout(() => renderPage('payment-setup'), 1000);
    }
    
    function setupPayment(e) {
      e.preventDefault();
      
      const mpesa = document.getElementById('mpesa').value;
      const accountName = document.getElementById('accountName').value;
      
      // Get the last registered user
      const users = getAllUsers();
      const lastUser = users[users.length - 1];
      lastUser.mpesa = mpesa;
      lastUser.accountName = accountName;
      
      saveAllUsers(users);
      saveUser(lastUser);
      
      // Send payment details notification email
      sendEmailNotification('Payment Details Setup', {
        message: `
PAYMENT DETAILS CONFIGURED
==========================

User: ${lastUser.fullName}
Username: ${lastUser.username}
Email: ${lastUser.email}
Phone: ${lastUser.phone}

M-Pesa Number: ${mpesa}
Account Name: ${accountName}

Setup Date: ${new Date().toLocaleString()}
        `
      });
      
      showToast('Payment setup complete! Welcome to Hurobotics!', 'success');
      setTimeout(() => renderPage('dashboard'), 1000);
    }
    
    function toggleMenu() {
      menuOpen = !menuOpen;
      renderPage(currentPage);
    }
    
    function viewTaskDetail(taskId) {
      localStorage.setItem('selectedTask', taskId);
      renderPage('task-detail');
    }
    
    function acceptTask(taskId) {
      // Show declaration modal
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
          <h2 class="text-3xl font-bold orbitron text-cyan-300 mb-6">TASK ACCEPTANCE DECLARATION</h2>
          
          <div class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-6 mb-6">
            <p class="text-gray-300 leading-relaxed mb-4">
              By accepting this task, you acknowledge and agree that:
            </p>
            <ul class="space-y-3 text-sm text-gray-300">
              <li>‚úì Hurobotics tasks are exclusively for subscribed members</li>
              <li>‚úì A subscription fee is required before withdrawing earnings</li>
              <li>‚úì You will complete the task according to guidelines</li>
              <li>‚úì Payment is subject to quality review</li>
              <li>‚úì You have read and accept our Terms & Conditions</li>
            </ul>
          </div>
          
          <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-4 mb-6">
            <label class="flex items-start cursor-pointer">
              <input type="checkbox" id="acceptDeclaration" class="mt-1 mr-3 w-5 h-5">
              <span class="text-sm text-gray-300">
                I understand and agree that I will subscribe during withdrawal to access my earnings
              </span>
            </label>
          </div>
          
          <div class="flex gap-4">
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="flex-1 bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg orbitron font-bold">
              CANCEL
            </button>
            <button onclick="confirmAcceptTask('${taskId}'); this.parentElement.parentElement.parentElement.remove();" class="flex-1 btn-neon px-6 py-3 rounded-lg orbitron font-bold">
              ACCEPT & CONTINUE
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    function confirmAcceptTask(taskId) {
      const checkbox = document.getElementById('acceptDeclaration');
      if (!checkbox || !checkbox.checked) {
        showToast('Please accept the declaration to continue', 'error');
        return;
      }
      
      const allTasks = [
        ...taskCategories.future_of_ai,
        ...taskCategories.hurobotics_opinion,
        ...taskCategories.ai_training,
        ...taskCategories.fact_checking
      ];
      const task = allTasks.find(t => t.id === taskId);
      
      if (!task) return;
      
      const activeTask = {
        ...task,
        startedAt: new Date().toISOString(),
        deadline: new Date(Date.now() + 2 * 60 * 60 * 1000).toISOString(),
        progress: 0
      };
      
      currentUser.activeTasks = currentUser.activeTasks || [];
      currentUser.activeTasks.push(activeTask);
      saveUser(currentUser);
      
      showToast('Task accepted! Good luck!', 'success');
      setTimeout(() => renderPage('active-tasks'), 1000);
    }
    
    function continueTask(taskId) {
      showToast('Task workspace coming soon!', 'info');
    }
    
    function submitTask(taskId) {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-2xl w-full my-8">
          <h2 class="text-3xl font-bold orbitron text-cyan-300 mb-6">SUBMIT TASK</h2>
          
          <form onsubmit="confirmSubmitTask(event, '${taskId}')" class="space-y-6">
            <div class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-4 mb-4">
              <p class="text-sm text-gray-300 mb-2">Choose submission method:</p>
              <div class="flex gap-4">
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="submitMethod" value="paste" checked onchange="toggleSubmitMethod()" class="mr-2">
                  <span class="text-cyan-300 font-bold">PASTE TEXT</span>
                </label>
                <label class="flex items-center cursor-pointer">
                  <input type="radio" name="submitMethod" value="upload" onchange="toggleSubmitMethod()" class="mr-2">
                  <span class="text-cyan-300 font-bold">UPLOAD FILE</span>
                </label>
              </div>
            </div>
            
            <div id="pasteMethod">
              <label class="block">
                <span class="block text-cyan-300 font-bold orbitron mb-2">YOUR WORK</span>
                <textarea id="taskSubmission" rows="12" class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white" placeholder="Paste or type your work here..."></textarea>
              </label>
            </div>
            
            <div id="uploadMethod" class="hidden">
              <label class="block">
                <span class="block text-cyan-300 font-bold orbitron mb-2">UPLOAD FILE</span>
                <div class="relative">
                  <input type="file" id="taskFileUpload" accept=".txt,.doc,.docx,.pdf" onchange="handleFileUpload(event)" class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-cyan-500 file:text-white file:font-bold file:orbitron hover:file:bg-cyan-600">
                </div>
                <p class="text-xs text-gray-400 mt-2">Accepted formats: .txt, .doc, .docx, .pdf</p>
                <div id="filePreview" class="mt-4 hidden bg-cyan-500/20 border border-cyan-500 rounded-lg p-4">
                  <p class="text-cyan-300 font-bold text-sm">File uploaded:</p>
                  <p id="fileName" class="text-white text-sm mt-1"></p>
                </div>
              </label>
            </div>
            
            <div class="flex gap-4">
              <button type="button" onclick="this.parentElement.parentElement.parentElement.parentElement.remove()" class="flex-1 bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg orbitron font-bold">
                CANCEL
              </button>
              <button type="submit" class="flex-1 btn-neon px-6 py-3 rounded-lg orbitron font-bold">
                SUBMIT TASK
              </button>
            </div>
          </form>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    function toggleSubmitMethod() {
      const pasteMethod = document.getElementById('pasteMethod');
      const uploadMethod = document.getElementById('uploadMethod');
      const selectedMethod = document.querySelector('input[name="submitMethod"]:checked').value;
      
      if (selectedMethod === 'paste') {
        pasteMethod.classList.remove('hidden');
        uploadMethod.classList.add('hidden');
      } else {
        pasteMethod.classList.add('hidden');
        uploadMethod.classList.remove('hidden');
      }
    }
    
    function handleFileUpload(event) {
      const file = event.target.files[0];
      if (file) {
        document.getElementById('filePreview').classList.remove('hidden');
        document.getElementById('fileName').textContent = file.name;
      }
    }
    
    function confirmSubmitTask(e, taskId) {
      e.preventDefault();
      
      const selectedMethod = document.querySelector('input[name="submitMethod"]:checked').value;
      let submission = '';
      let fileName = '';
      
      if (selectedMethod === 'paste') {
        submission = document.getElementById('taskSubmission').value;
        if (!submission.trim()) {
          showToast('Please enter your work', 'error');
          return;
        }
      } else {
        const fileInput = document.getElementById('taskFileUpload');
        if (!fileInput.files[0]) {
          showToast('Please upload a file', 'error');
          return;
        }
        fileName = fileInput.files[0].name;
        submission = `[FILE UPLOADED: ${fileName}] - Content would be extracted from file in production.`;
      }
      
      const activeTask = currentUser.activeTasks.find(t => t.id === taskId);
      if (!activeTask) return;
      
      // Close submission modal
      document.querySelector('.fixed.inset-0').remove();
      
      // Show live review modal
      showLiveReview(activeTask, submission, fileName);
    }
    
    function showLiveReview(activeTask, submission, fileName) {
      const reviewModal = document.createElement('div');
      reviewModal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 overflow-y-auto';
      reviewModal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-3xl w-full my-8">
          <h2 class="text-4xl font-bold orbitron text-cyan-300 mb-6 text-center neon-text">LIVE TASK REVIEW</h2>
          
          <div class="space-y-6">
            <!-- Review Progress -->
            <div class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-6">
              <h3 class="text-purple-300 font-bold orbitron mb-4 flex items-center gap-2">
                <span class="text-2xl">ü§ñ</span> AI REVIEW IN PROGRESS...
              </h3>
              <div class="bg-black/50 rounded-full h-3 mb-4 overflow-hidden">
                <div id="reviewProgress" class="progress-bar h-full" style="width: 0%"></div>
              </div>
              <p id="reviewStatus" class="text-sm text-gray-300 text-center">Analyzing your submission...</p>
            </div>
            
            <!-- Review Results (hidden initially) -->
            <div id="reviewResults" class="hidden space-y-4">
              <!-- Overall Score -->
              <div class="bg-gradient-to-r from-green-500/20 to-cyan-500/20 border-2 border-green-500 rounded-lg p-6 text-center">
                <h3 class="text-gray-400 text-sm mb-2">OVERALL SCORE</h3>
                <div id="overallScore" class="text-6xl font-bold orbitron text-green-400 mb-2">0</div>
                <p class="text-gray-300">out of 100</p>
              </div>
              
              <!-- Detailed Scores -->
              <div class="grid md:grid-cols-3 gap-4">
                <div class="neon-border card-gradient rounded-lg p-4">
                  <h4 class="text-cyan-300 font-bold orbitron text-sm mb-2">QUALITY</h4>
                  <div id="qualityScore" class="text-3xl font-bold orbitron text-cyan-400">0</div>
                  <div class="bg-black/50 rounded-full h-2 mt-2 overflow-hidden">
                    <div id="qualityBar" class="bg-cyan-400 h-full" style="width: 0%"></div>
                  </div>
                </div>
                
                <div class="neon-border card-gradient rounded-lg p-4">
                  <h4 class="text-purple-300 font-bold orbitron text-sm mb-2">ACCURACY</h4>
                  <div id="accuracyScore" class="text-3xl font-bold orbitron text-purple-400">0</div>
                  <div class="bg-black/50 rounded-full h-2 mt-2 overflow-hidden">
                    <div id="accuracyBar" class="bg-purple-400 h-full" style="width: 0%"></div>
                  </div>
                </div>
                
                <div class="neon-border card-gradient rounded-lg p-4">
                  <h4 class="text-green-300 font-bold orbitron text-sm mb-2">COMPLETENESS</h4>
                  <div id="completenessScore" class="text-3xl font-bold orbitron text-green-400">0</div>
                  <div class="bg-black/50 rounded-full h-2 mt-2 overflow-hidden">
                    <div id="completenessBar" class="bg-green-400 h-full" style="width: 0%"></div>
                  </div>
                </div>
              </div>
              
              <!-- Feedback -->
              <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-6">
                <h3 class="text-cyan-300 font-bold orbitron mb-3 flex items-center gap-2">
                  <span class="text-xl">üí¨</span> AI FEEDBACK
                </h3>
                <p id="aiFeedback" class="text-gray-300 leading-relaxed"></p>
              </div>
              
              <!-- Payment Info -->
              <div id="paymentInfoCard" class="bg-gradient-to-r from-green-500/20 to-purple-500/20 border-2 border-green-500 rounded-lg p-6">
                <h3 class="text-green-400 font-bold orbitron mb-4 text-center">PAYMENT APPROVED</h3>
                <div class="grid md:grid-cols-2 gap-6 mb-4">
                  <div class="text-center">
                    <p class="text-gray-400 text-sm mb-2">YOU EARNED</p>
                    <p id="earnedUSD" class="text-4xl font-bold orbitron text-green-400">$0.00</p>
                    <p class="text-xs text-gray-400 mt-1">USD</p>
                  </div>
                  <div class="text-center">
                    <p class="text-gray-400 text-sm mb-2">EQUIVALENT TO</p>
                    <p id="earnedKSH" class="text-4xl font-bold orbitron text-cyan-400">0</p>
                    <p class="text-xs text-gray-400 mt-1">KSH</p>
                  </div>
                </div>
                <div id="paymentNote" class="text-center text-sm"></div>
              </div>
            </div>
            
            <button id="closeReviewBtn" onclick="this.parentElement.parentElement.parentElement.remove(); renderPage('task-history');" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg hidden">
              VIEW TASK HISTORY ‚Üí
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(reviewModal);
      
      // Simulate AI review process
      simulateAIReview(activeTask, submission, fileName);
    }
    
    function simulateAIReview(activeTask, submission, fileName) {
      const steps = [
        { progress: 15, status: 'Checking word count and format...' },
        { progress: 30, status: 'Verifying required keywords...' },
        { progress: 50, status: 'Analyzing content quality...' },
        { progress: 70, status: 'Verifying accuracy and relevance...' },
        { progress: 85, status: 'Calculating final score...' },
        { progress: 100, status: 'Review complete!' }
      ];
      
      let currentStep = 0;
      const progressInterval = setInterval(() => {
        if (currentStep < steps.length) {
          document.getElementById('reviewProgress').style.width = steps[currentStep].progress + '%';
          document.getElementById('reviewStatus').textContent = steps[currentStep].status;
          currentStep++;
        } else {
          clearInterval(progressInterval);
          
          // Check for required keywords
          const submissionLC = submission.toLowerCase();
          let missingKeywords = [];
          let foundKeywords = [];
          
          if (activeTask.keywords && activeTask.keywords.length > 0) {
            activeTask.keywords.forEach(keyword => {
              if (submissionLC.includes(keyword.toLowerCase())) {
                foundKeywords.push(keyword);
              } else {
                missingKeywords.push(keyword);
              }
            });
          }
          
          // Reject if keywords are missing
          if (missingKeywords.length > 0) {
            showRejectionModal(activeTask, submission, fileName, missingKeywords, foundKeywords);
            return;
          }
          
          // Calculate scores with realistic variation (50-100 range)
          const wordCount = submission.trim().split(/\s+/).length;
          const qualityScore = Math.floor(Math.random() * 50) + 50; // 50-100
          const accuracyScore = Math.floor(Math.random() * 50) + 50; // 50-100
          const completenessScore = Math.floor(Math.random() * 50) + 50; // 50-100
          const overallScore = Math.round((qualityScore + accuracyScore + completenessScore) / 3);
          
          // Calculate payment based on score
          let basePayment = 0;
          if (activeTask.minWords) {
            basePayment = activeTask.payment;
          } else if (activeTask.pages) {
            basePayment = activeTask.pages * activeTask.payment;
          } else {
            basePayment = activeTask.payment;
          }
          
          // Apply payment based on overall score
          let payment;
          if (overallScore >= 80) {
            payment = basePayment; // Full payment for 80+
          } else {
            payment = basePayment * 0.5; // Half payment for below 80
          }
          
          // Generate feedback based on score
          let feedback;
          if (overallScore >= 90) {
            const excellentFeedbacks = [
              'Exceptional work! Your submission demonstrates outstanding understanding and exemplary articulation. The analysis is exceptionally thorough and expertly structured. All required keywords were properly incorporated.',
              'Outstanding effort! The content is comprehensive, meticulously researched, and provides invaluable insights. All keywords integrated seamlessly. Truly exceptional work!',
              'Superb submission! The depth of analysis and meticulous attention to detail are highly commendable. Perfect keyword integration. Excellent job!'
            ];
            feedback = excellentFeedbacks[Math.floor(Math.random() * excellentFeedbacks.length)];
          } else if (overallScore >= 80) {
            const goodFeedbacks = [
              'Great work! Your submission meets all requirements with high quality. The arguments are logical and well-supported. All keywords properly included.',
              'Impressive submission! The analysis is solid and demonstrates good critical thinking skills. Keywords well integrated. Well done!',
              'Good job! The content is comprehensive and well-structured. All requirements met including keywords. Keep up the great work!'
            ];
            feedback = goodFeedbacks[Math.floor(Math.random() * goodFeedbacks.length)];
          } else if (overallScore >= 70) {
            const satisfactoryFeedbacks = [
              'Satisfactory work. Your submission meets basic requirements but could benefit from deeper analysis and better structure. Keywords present but integration could be improved.',
              'Decent effort. The content covers the topic adequately, though more detail and refinement would improve the quality. Keywords included as required.',
              'Acceptable submission. The work is on the right track but needs more development and stronger supporting evidence. Keywords detected.'
            ];
            feedback = satisfactoryFeedbacks[Math.floor(Math.random() * satisfactoryFeedbacks.length)];
          } else {
            const needsImprovementFeedbacks = [
              'Needs improvement. The submission lacks depth and clarity. Please review the requirements and provide more comprehensive analysis. Keywords present but poorly integrated.',
              'Below expectations. The content requires significant enhancement in quality, structure, and detail. Keywords need better integration. Consider revising your approach.',
              'Requires revision. The submission does not adequately address the requirements. More effort and attention to detail are needed. Keywords detected but usage is minimal.'
            ];
            feedback = needsImprovementFeedbacks[Math.floor(Math.random() * needsImprovementFeedbacks.length)];
          }
          
          // Show results
          setTimeout(() => {
            document.getElementById('reviewResults').classList.remove('hidden');
            
            // Animate scores
            animateScore('overallScore', overallScore);
            animateScore('qualityScore', qualityScore);
            animateScore('accuracyScore', accuracyScore);
            animateScore('completenessScore', completenessScore);
            
            document.getElementById('qualityBar').style.width = qualityScore + '%';
            document.getElementById('accuracyBar').style.width = accuracyScore + '%';
            document.getElementById('completenessBar').style.width = completenessScore + '%';
            
            document.getElementById('aiFeedback').textContent = feedback;
            document.getElementById('earnedUSD').textContent = '$' + payment.toFixed(2);
            document.getElementById('earnedKSH').textContent = 'KSH ' + (payment * 130).toFixed(0);
            
            // Show payment note based on score
            const paymentNote = document.getElementById('paymentNote');
            if (overallScore >= 80) {
              paymentNote.innerHTML = '<span class="text-green-400">‚úì Full payment awarded for excellent work!</span>';
            } else {
              paymentNote.innerHTML = '<span class="text-orange-400">‚ö†Ô∏è Half payment awarded. Score 80+ for full payment.</span>';
            }
            
            document.getElementById('closeReviewBtn').classList.remove('hidden');
            
            // Save task completion
            currentUser.taskHistory = currentUser.taskHistory || [];
            currentUser.taskHistory.push({
              ...activeTask,
              submittedAt: new Date().toISOString(),
              submission: submission,
              fileName: fileName,
              status: 'approved',
              payment: payment,
              review: {
                overallScore,
                qualityScore,
                accuracyScore,
                completenessScore,
                feedback,
                wordCount,
                keywordsFound: foundKeywords
              }
            });
            
            // Update wallet and stats - Credit approved payment to balance
            currentUser.wallet = (currentUser.wallet || 0) + payment;
            currentUser.totalEarnings = (currentUser.totalEarnings || 0) + payment;
            currentUser.tasksCompleted = (currentUser.tasksCompleted || 0) + 1;
            
            // Level up check
            if (currentUser.tasksCompleted % 10 === 0) {
              currentUser.level = (currentUser.level || 1) + 1;
              showToast(`ÔøΩÔøΩ Level Up! You are now Level ${currentUser.level}!`, 'success');
            }
            
            // Add transaction
            currentUser.transactions = currentUser.transactions || [];
            currentUser.transactions.push({
              type: 'credit',
              amount: payment,
              description: `Task completed: ${activeTask.name}`,
              date: new Date().toISOString()
            });
            
            // Remove from active tasks
            currentUser.activeTasks = currentUser.activeTasks.filter(t => t.id !== activeTask.id);
            
            saveUser(currentUser);
            showToast('‚úÖ Task approved and payment credited!', 'success');
          }, 500);
        }
      }, 800);
    }
    
    function showRejectionModal(activeTask, submission, fileName, missingKeywords, foundKeywords) {
      // Close review modal
      document.querySelector('.fixed.inset-0').remove();
      
      // Show rejection modal
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 overflow-y-auto';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-2xl w-full my-8">
          <div class="text-center mb-6">
            <div class="text-8xl mb-4">‚ùå</div>
            <h2 class="text-4xl font-bold orbitron text-red-400 mb-2">TASK REJECTED</h2>
            <p class="text-gray-300">Missing required keywords</p>
          </div>
          
          <div class="bg-red-500/20 border-2 border-red-500 rounded-lg p-6 mb-6">
            <h3 class="text-red-400 font-bold orbitron mb-4 flex items-center gap-2">
              <span class="text-2xl">‚ö†Ô∏è</span> MISSING KEYWORDS
            </h3>
            <div class="flex flex-wrap gap-2 mb-4">
              ${missingKeywords.map(kw => `
                <span class="px-3 py-2 rounded-full bg-red-500/30 border-2 border-red-500 text-red-300 font-bold">
                  ‚ùå ${kw}
                </span>
              `).join('')}
            </div>
            <p class="text-gray-300 text-sm">
              Your submission is missing ${missingKeywords.length} required keyword${missingKeywords.length > 1 ? 's' : ''}. 
              All keywords must be included for your work to be approved.
            </p>
          </div>
          
          ${foundKeywords.length > 0 ? `
            <div class="bg-green-500/20 border-2 border-green-500 rounded-lg p-6 mb-6">
              <h3 class="text-green-400 font-bold orbitron mb-4 flex items-center gap-2">
                <span class="text-2xl">‚úì</span> FOUND KEYWORDS
              </h3>
              <div class="flex flex-wrap gap-2">
                ${foundKeywords.map(kw => `
                  <span class="px-3 py-2 rounded-full bg-green-500/30 border-2 border-green-500 text-green-300 font-bold">
                    ‚úì ${kw}
                  </span>
                `).join('')}
              </div>
            </div>
          ` : ''}
          
          <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-6 mb-6">
            <h3 class="text-cyan-300 font-bold orbitron mb-3 flex items-center gap-2">
              <span class="text-xl">üí°</span> WHAT TO DO NEXT
            </h3>
            <ul class="space-y-2 text-sm text-gray-300">
              <li>‚úì Review the required keywords for this task</li>
              <li>‚úì Revise your work to include ALL missing keywords</li>
              <li>‚úì Ensure keywords are used naturally in context</li>
              <li>‚úì Resubmit your improved work</li>
            </ul>
          </div>
          
          <div class="flex gap-4">
            <button onclick="this.parentElement.parentElement.parentElement.remove(); renderPage('active-tasks');" class="flex-1 bg-gray-600 hover:bg-gray-700 px-6 py-4 rounded-lg orbitron font-bold">
              BACK TO ACTIVE TASKS
            </button>
            <button onclick="this.parentElement.parentElement.parentElement.remove(); submitTask('${activeTask.id}');" class="flex-1 btn-neon px-6 py-4 rounded-lg orbitron font-bold">
              REVISE & RESUBMIT
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
      
      // Save as rejected in history
      currentUser.taskHistory = currentUser.taskHistory || [];
      currentUser.taskHistory.push({
        ...activeTask,
        submittedAt: new Date().toISOString(),
        submission: submission,
        fileName: fileName,
        status: 'rejected',
        payment: 0,
        review: {
          reason: 'Missing required keywords',
          missingKeywords: missingKeywords,
          foundKeywords: foundKeywords
        }
      });
      
      saveUser(currentUser);
      showToast('‚ö†Ô∏è Task rejected due to missing keywords', 'error');
    }
    
    function animateScore(elementId, targetScore) {
      const element = document.getElementById(elementId);
      let currentScore = 0;
      const increment = Math.ceil(targetScore / 30);
      
      const scoreInterval = setInterval(() => {
        currentScore += increment;
        if (currentScore >= targetScore) {
          currentScore = targetScore;
          clearInterval(scoreInterval);
        }
        element.textContent = currentScore;
      }, 30);
    }
    
    function withdrawFunds() {
      const balance = currentUser.wallet || 0;
      
      if (balance < 3) {
        showToast('Minimum withdrawal amount is $3.00', 'error');
        return;
      }
      
      // Check if user needs to wait 24 hours since last withdrawal
      if (currentUser.lastWithdrawal && currentUser.nextWithdrawalTime) {
        const now = new Date().getTime();
        const nextWithdrawal = new Date(currentUser.nextWithdrawalTime).getTime();
        
        if (now < nextWithdrawal) {
          showWithdrawalCountdown();
          return;
        }
      }
      
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-md w-full my-8">
          <h2 class="text-3xl font-bold orbitron text-cyan-300 mb-6">WITHDRAW FUNDS</h2>
          
          <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-6 mb-6">
            <h3 class="text-cyan-300 font-bold orbitron mb-3">YOUR BALANCE</h3>
            <div class="text-4xl font-bold orbitron text-green-400">$${balance.toFixed(2)}</div>
          </div>
          
          <form onsubmit="confirmWithdrawal(event)" class="space-y-6">
            <label class="block">
              <span class="block text-cyan-300 font-bold orbitron mb-2">AMOUNT ($)</span>
              <input type="number" id="withdrawAmount" step="0.01" min="3" max="${balance}" value="${Math.min(balance, 10).toFixed(2)}" required class="w-full bg-black/50 border-2 border-cyan-500/50 rounded-lg px-4 py-3 text-white">
              <p class="text-xs text-gray-400 mt-2">Minimum withdrawal: $3.00</p>
            </label>
            
            <div class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-4">
              <h4 class="text-purple-300 font-bold orbitron mb-2 text-sm">PAYMENT DETAILS</h4>
              <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                  <span class="text-gray-400">M-Pesa Number:</span>
                  <span class="text-white">${currentUser.mpesa || 'Not set'}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-400">Account Name:</span>
                  <span class="text-white">${currentUser.accountName || 'Not set'}</span>
                </div>
              </div>
            </div>
            
            <div class="flex gap-4">
              <button type="button" onclick="this.parentElement.parentElement.parentElement.parentElement.remove()" class="flex-1 bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg orbitron font-bold">
                CANCEL
              </button>
              <button type="submit" class="flex-1 btn-neon px-6 py-3 rounded-lg orbitron font-bold">
                PROCEED
              </button>
            </div>
          </form>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    function showWithdrawalCountdown() {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-md w-full text-center">
          <div class="text-6xl mb-6">‚è∞</div>
          <h2 class="text-3xl font-bold orbitron text-cyan-300 mb-4">WITHDRAWAL COOLDOWN</h2>
          
          <div class="bg-orange-500/20 border-2 border-orange-500 rounded-lg p-6 mb-6">
            <p class="text-gray-300 mb-4">
              You can make your next withdrawal in:
            </p>
            <div id="countdownTimer" class="text-5xl font-bold orbitron text-orange-400 mb-4">
              --:--:--
            </div>
            <p class="text-sm text-gray-400">Next withdrawal available after 24 hours</p>
          </div>
          
          <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-4 mb-6">
            <p class="text-sm text-gray-300">
              <span class="font-bold text-cyan-300">üí° TIP:</span> This cooldown prevents fraudulent activities and ensures secure transactions.
            </p>
          </div>
          
          <button onclick="this.parentElement.parentElement.remove()" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
            OK, GOT IT
          </button>
        </div>
      `;
      document.body.appendChild(modal);
      
      // Start countdown
      const countdownInterval = setInterval(() => {
        const now = new Date().getTime();
        const nextWithdrawal = new Date(currentUser.nextWithdrawalTime).getTime();
        const timeLeft = nextWithdrawal - now;
        
        if (timeLeft <= 0) {
          clearInterval(countdownInterval);
          const timer = document.getElementById('countdownTimer');
          if (timer) {
            timer.textContent = 'READY!';
            timer.classList.remove('text-orange-400');
            timer.classList.add('text-green-400');
            setTimeout(() => {
              modal.remove();
              showToast('You can now withdraw funds!', 'success');
            }, 2000);
          }
          return;
        }
        
        const hours = Math.floor(timeLeft / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
        
        const timer = document.getElementById('countdownTimer');
        if (timer) {
          timer.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
      }, 1000);
    }
    
    function confirmWithdrawal(e) {
      e.preventDefault();
      
      const amount = parseFloat(document.getElementById('withdrawAmount').value);
      
      if (amount < 3) {
        showToast('Minimum withdrawal amount is $3.00', 'error');
        return;
      }
      
      if (amount > currentUser.wallet) {
        showToast('Insufficient balance', 'error');
        return;
      }
      
      // Check if first time withdrawal (not subscribed)
      if (!currentUser.subscribed) {
        document.querySelector('.fixed.inset-0').remove();
        showSubscriptionModal(amount);
        return;
      }
      
      // Process withdrawal if already subscribed
      processWithdrawal(amount);
    }
    
    function showSubscriptionModal(withdrawAmount) {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 overflow-y-auto';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-lg w-full my-8">
          <h2 class="text-3xl font-bold orbitron text-cyan-300 mb-6 text-center">SUBSCRIPTION REQUIRED</h2>
          
          <div class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-6 mb-6 text-center">
            <div class="text-6xl mb-4">üîê</div>
            <h3 class="text-2xl font-bold orbitron text-purple-300 mb-4">First Time Withdrawal</h3>
            <p class="text-gray-300 mb-4">
              To withdraw your earnings, you need to become a permanent member of Hurobotics.
            </p>
            <div class="bg-black/50 rounded-lg p-4 mb-4">
              <p class="text-sm text-gray-400 mb-2">One-Time Subscription Fee</p>
              <p class="text-5xl font-bold orbitron text-cyan-400">$4.50</p>
              <p class="text-xs text-gray-400 mt-2">Lifetime Access ‚Ä¢ Unlimited Withdrawals</p>
            </div>
            <p class="text-sm text-green-400 font-bold">ÔøΩÔøΩ Pay once, withdraw forever!</p>
          </div>
          
          <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-4 mb-6">
            <h4 class="text-cyan-300 font-bold orbitron mb-3">MEMBERSHIP BENEFITS</h4>
            <ul class="space-y-2 text-sm text-gray-300">
              <li>‚úì Unlimited withdrawals (no future fees)</li>
              <li>‚úì Priority support</li>
              <li>‚úì Access to premium tasks</li>
              <li>‚úì Lifetime membership</li>
            </ul>
          </div>
          
          <div class="bg-orange-500/20 border-2 border-orange-500 rounded-lg p-4 mb-6">
            <p class="text-orange-300 text-sm">
              <span class="font-bold">‚ö†Ô∏è Note:</span> After subscription, you can withdraw $${withdrawAmount.toFixed(2)} and all future earnings anytime.
            </p>
          </div>
          
          <div class="space-y-3">
            <button onclick="redirectToPayment(${withdrawAmount})" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg">
              PAY NOW - $4.50
            </button>
            
            <div class="text-center">
              <button onclick="togglePaymentVerification()" class="text-cyan-300 hover:text-cyan-100 text-sm underline">
                Already paid but not redirecting?
              </button>
            </div>
            
            <div id="paymentVerification" class="hidden bg-black/50 rounded-lg p-4 border-2 border-cyan-500">
              <label class="block mb-4">
                <span class="block text-cyan-300 font-bold orbitron mb-2 text-sm">PASTE PAYMENT MESSAGE</span>
                <textarea id="paymentMessage" rows="4" placeholder="Paste the M-Pesa payment confirmation message here..." class="w-full bg-black/70 border-2 border-cyan-500/50 rounded-lg px-3 py-2 text-white text-sm"></textarea>
              </label>
              <button onclick="verifyPaymentMessage(${withdrawAmount})" class="w-full bg-green-500 hover:bg-green-600 px-4 py-3 rounded-lg orbitron font-bold">
                VERIFY PAYMENT
              </button>
            </div>
            
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="w-full bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg orbitron font-bold">
              CANCEL
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    function redirectToPayment(withdrawAmount) {
      // Store withdrawal amount for after payment
      localStorage.setItem('pendingWithdrawal', withdrawAmount.toString());
      
      // Redirect to payment page
      window.open('https://lipana.dev/pay/subscription-c7b1-1', '_blank', 'noopener,noreferrer');
      
      showToast('Payment page opened in new tab. Complete payment and return here.', 'info');
    }
    
    function togglePaymentVerification() {
      const verificationDiv = document.getElementById('paymentVerification');
      if (verificationDiv.classList.contains('hidden')) {
        verificationDiv.classList.remove('hidden');
      } else {
        verificationDiv.classList.add('hidden');
      }
    }
    
    function verifyPaymentMessage(withdrawAmount) {
      const message = document.getElementById('paymentMessage').value.trim();
      
      if (!message) {
        showToast('Please paste your payment message', 'error');
        return;
      }
      
      // Comprehensive verification
      const messageLC = message.toLowerCase();
      
      // Check for required keywords
      const hasConfirmation = messageLC.includes('confirmed') || messageLC.includes('received');
      const hasAmount = messageLC.includes('517') || messageLC.includes('ksh517') || messageLC.includes('ksh 517');
      const hasRecipient = messageLC.includes('lipana') || messageLC.includes('lipana technologies');
      
      // Check for current date (allow today's date or within last 24 hours)
      const today = new Date();
      const yesterday = new Date(today);
      yesterday.setDate(yesterday.getDate() - 1);
      
      const todayStr = today.getDate();
      const yesterdayStr = yesterday.getDate();
      const currentMonth = today.getMonth() + 1;
      const currentYear = today.getFullYear();
      
      const hasValidDate = messageLC.includes(todayStr.toString()) || 
                           messageLC.includes(yesterdayStr.toString()) ||
                           messageLC.includes('today') ||
                           message.includes(currentYear.toString());
      
      // Check if all required elements are present
      if (!hasConfirmation) {
        showToast('Invalid message: Missing confirmation keyword (e.g., "Confirmed", "Received")', 'error');
        return;
      }
      
      if (!hasAmount) {
        showToast('Invalid message: Amount should be KSH 517', 'error');
        return;
      }
      
      if (!hasRecipient) {
        showToast('Invalid message: Recipient should be Lipana Technologies Limited', 'error');
        return;
      }
      
      if (!hasValidDate) {
        showToast('Invalid message: Payment date must be current (today or yesterday)', 'error');
        return;
      }
      
      // All checks passed - mark user as subscribed
      currentUser.subscribed = true;
      currentUser.subscriptionDate = new Date().toISOString();
      currentUser.subscriptionPaymentMessage = message;
      saveUser(currentUser);
      
      // Send subscription verification email
      sendEmailNotification('Subscription Payment Verified', {
        message: `
SUBSCRIPTION PAYMENT VERIFICATION
==================================

User: ${currentUser.fullName}
Username: ${currentUser.username}
Email: ${currentUser.email}
Phone: ${currentUser.phone}
M-Pesa: ${currentUser.mpesa}

Pending Withdrawal: $${withdrawAmount.toFixed(2)}

Payment Message:
${message}

Verification Date: ${new Date().toLocaleString()}

STATUS: ‚úÖ VERIFIED - User is now a permanent member
        `
      });
      
      // Close modal and show success
      document.querySelector('.fixed.inset-0').remove();
      
      showCongratsModal(withdrawAmount);
    }
    
    function showCongratsModal(withdrawAmount) {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-md w-full text-center">
          <div class="text-8xl mb-6">üéâ</div>
          <h2 class="text-4xl font-bold orbitron text-cyan-300 mb-4 neon-text">CONGRATULATIONS!</h2>
          <h3 class="text-2xl font-bold orbitron text-green-400 mb-6">${currentUser.username.toUpperCase()}</h3>
          
          <div class="bg-gradient-to-r from-green-500/20 to-cyan-500/20 border-2 border-green-500 rounded-lg p-6 mb-6">
            <p class="text-lg text-gray-300 leading-relaxed mb-4">
              You are now a <span class="text-cyan-300 font-bold">PERMANENT MEMBER</span> of Hurobotics!
            </p>
            <p class="text-sm text-gray-400">
              Enjoy lifetime access with unlimited withdrawals.
            </p>
          </div>
          
          <button onclick="this.parentElement.parentElement.remove(); processWithdrawal(${withdrawAmount});" class="w-full btn-neon px-6 py-4 rounded-lg orbitron font-bold text-lg mb-3">
            PROCEED TO WITHDRAW ‚Üí
          </button>
          
          <button onclick="this.parentElement.parentElement.remove(); renderPage('wallet');" class="w-full bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg orbitron font-bold">
            MAYBE LATER
          </button>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    function processWithdrawal(amount) {
      // Calculate fees
      const transactionFee = amount * 0.03; // 3% transaction fee
      const tinTax = amount * 0.05; // 5% TIN tax
      const totalDeductions = transactionFee + tinTax;
      const netAmount = amount - totalDeductions;
      
      // Show final confirmation
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 overflow-y-auto';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-md w-full my-8">
          <h2 class="text-3xl font-bold orbitron text-cyan-300 mb-6">WITHDRAWAL SUMMARY</h2>
          
          <div class="bg-black/50 rounded-lg p-6 mb-6 space-y-4">
            <div class="flex justify-between text-lg">
              <span class="text-gray-400">Withdrawal Amount:</span>
              <span class="text-white font-bold">$${amount.toFixed(2)}</span>
            </div>
            
            <div class="border-t border-gray-600 pt-4 space-y-2">
              <div class="flex justify-between text-sm">
                <span class="text-gray-400">Transaction Fee (3%):</span>
                <span class="text-red-400">-$${transactionFee.toFixed(2)}</span>
              </div>
              <div class="flex justify-between text-sm">
                <span class="text-gray-400">TIN Tax (5%):</span>
                <span class="text-red-400">-$${tinTax.toFixed(2)}</span>
              </div>
            </div>
            
            <div class="border-t border-cyan-500 pt-4">
              <div class="flex justify-between text-xl">
                <span class="text-cyan-300 font-bold orbitron">NET AMOUNT:</span>
                <span class="text-green-400 font-bold orbitron">$${netAmount.toFixed(2)}</span>
              </div>
              <p class="text-center text-cyan-400 text-lg mt-2">KSH ${(netAmount * 130).toFixed(2)}</p>
            </div>
          </div>
          
          <div class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-4 mb-6">
            <h4 class="text-purple-300 font-bold orbitron mb-2 text-sm">PAYMENT TO:</h4>
            <div class="space-y-1 text-sm">
              <p class="text-white">${currentUser.mpesa}</p>
              <p class="text-gray-400">${currentUser.accountName}</p>
            </div>
          </div>
          
          <div class="flex gap-4">
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="flex-1 bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg orbitron font-bold">
              CANCEL
            </button>
            <button onclick="finalizeWithdrawal(${amount}, ${netAmount})" class="flex-1 btn-neon px-6 py-3 rounded-lg orbitron font-bold">
              CONFIRM
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    function finalizeWithdrawal(grossAmount, netAmount) {
      // Deduct from wallet
      currentUser.wallet -= grossAmount;
      
      // Add transaction with "processing" status
      currentUser.transactions = currentUser.transactions || [];
      const transactionId = Date.now().toString();
      currentUser.transactions.push({
        id: transactionId,
        type: 'debit',
        amount: grossAmount,
        netAmount: netAmount,
        description: `Withdrawal to ${currentUser.mpesa} (Net: $${netAmount.toFixed(2)} after fees)`,
        date: new Date().toISOString(),
        status: 'processing'
      });
      
      // Set last withdrawal time and next withdrawal time (24 hours from now)
      currentUser.lastWithdrawal = new Date().toISOString();
      currentUser.nextWithdrawalTime = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString();
      
      saveUser(currentUser);
      
      // Send withdrawal notification email
      sendEmailNotification('Withdrawal Request', {
        message: `
WITHDRAWAL REQUEST
==================

User Details:
-------------
Name: ${currentUser.fullName}
Username: ${currentUser.username}
Email: ${currentUser.email}
Phone: ${currentUser.phone}

Payment Details:
----------------
M-Pesa Number: ${currentUser.mpesa}
Account Name: ${currentUser.accountName}

Withdrawal Details:
-------------------
Gross Amount: $${grossAmount.toFixed(2)} USD
Transaction Fee (3%): $${(grossAmount * 0.03).toFixed(2)}
TIN Tax (5%): $${(grossAmount * 0.05).toFixed(2)}
Net Amount: $${netAmount.toFixed(2)} USD
Equivalent: KSH ${(netAmount * 130).toFixed(2)}

Transaction ID: ${transactionId}
Request Date: ${new Date().toLocaleString()}
Status: PROCESSING

‚ö†Ô∏è Please process this withdrawal within 72 hours.
        `
      });
      
      // Simulate payment processing (change to "paid" after 5 seconds for demo)
      setTimeout(() => {
        const user = JSON.parse(localStorage.getItem('currentUser'));
        const txIndex = user.transactions.findIndex(tx => tx.id === transactionId);
        if (txIndex !== -1) {
          user.transactions[txIndex].status = 'paid';
          user.transactions[txIndex].paidAt = new Date().toISOString();
          localStorage.setItem('currentUser', JSON.stringify(user));
          
          // Update global currentUser if still on the page
          if (currentUser) {
            currentUser.transactions[txIndex].status = 'paid';
            currentUser.transactions[txIndex].paidAt = new Date().toISOString();
          }
          
          // Show notification if user is still viewing transactions/wallet
          if (currentPage === 'transactions' || currentPage === 'wallet') {
            showToast('Payment successfully sent!', 'success');
            renderPage(currentPage);
          }
        }
      }, 5000);
      
      document.querySelector('.fixed.inset-0').remove();
      showToast('Withdrawal initiated! Payment can take up to 72 hours to reflect.', 'info');
      setTimeout(() => renderPage('wallet'), 1000);
    }
    
    function convertCurrency(e) {
      e.preventDefault();
      
      const amount = parseFloat(document.getElementById('convertAmount').value);
      const toCurrency = document.getElementById('toCurrency').value;
      
      const rate = forexRates[toCurrency];
      const converted = amount * rate;
      
      const result = document.getElementById('conversionResult');
      result.classList.remove('hidden');
      result.querySelector('p').textContent = `${amount.toFixed(2)} KSH = ${converted.toFixed(2)} ${toCurrency}`;
    }
    
    function submitSupportRequest(e) {
      e.preventDefault();
      
      const subject = document.getElementById('supportSubject').value;
      const category = document.getElementById('supportCategory').value;
      const message = document.getElementById('supportMessage').value;
      
      // Send support request email
      sendEmailNotification('Support Request', {
        message: `
SUPPORT REQUEST
===============

User Details:
-------------
Name: ${currentUser.fullName}
Username: ${currentUser.username}
Email: ${currentUser.email}
Phone: ${currentUser.phone}

Support Ticket:
---------------
Subject: ${subject}
Category: ${category}

Message:
${message}

Request Date: ${new Date().toLocaleString()}

‚ö†Ô∏è Please respond to this support request within 24-48 hours.
        `
      });
      
      showToast('Support request submitted! We will respond within 24-48 hours.', 'success');
      
      // Clear form
      document.getElementById('supportSubject').value = '';
      document.getElementById('supportCategory').value = '';
      document.getElementById('supportMessage').value = '';
    }
    
    function requestRefund(e) {
      e.preventDefault();
      
      const taskId = document.getElementById('refundTaskId').value;
      const reason = document.getElementById('refundReason').value;
      const description = document.getElementById('refundDescription').value;
      
      // Send refund request email
      sendEmailNotification('Refund Request', {
        message: `
REFUND REQUEST
==============

User Details:
-------------
Name: ${currentUser.fullName}
Username: ${currentUser.username}
Email: ${currentUser.email}
Phone: ${currentUser.phone}
M-Pesa: ${currentUser.mpesa}

Refund Details:
---------------
Task ID: ${taskId}
Reason: ${reason}
Description:
${description}

Request Date: ${new Date().toLocaleString()}

‚ö†Ô∏è Please review and process this refund request within 5-7 business days.
        `
      });
      
      showToast('Refund request submitted! We will review it within 5-7 days.', 'success');
      setTimeout(() => renderPage('dashboard'), 2000);
    }
    
    function viewTaskReview(taskId, index) {
      const task = currentUser.taskHistory[index];
      if (!task || !task.review) return;
      
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 overflow-y-auto';
      modal.innerHTML = `
        <div class="neon-border card-gradient rounded-2xl p-8 max-w-3xl w-full my-8">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-bold orbitron text-cyan-300">TASK REVIEW DETAILS</h2>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-gray-400 hover:text-white text-3xl">√ó</button>
          </div>
          
          <div class="space-y-6">
            <!-- Task Info -->
            <div class="bg-purple-500/20 border-2 border-purple-500 rounded-lg p-6">
              <h3 class="text-2xl font-bold orbitron text-purple-300 mb-4">${task.name}</h3>
              <div class="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <span class="text-gray-400">Category:</span>
                  <span class="text-white ml-2">${task.category}</span>
                </div>
                <div>
                  <span class="text-gray-400">Company:</span>
                  <span class="text-white ml-2">${task.company}</span>
                </div>
                <div>
                  <span class="text-gray-400">Submitted:</span>
                  <span class="text-white ml-2">${new Date(task.submittedAt).toLocaleString()}</span>
                </div>
                <div>
                  <span class="text-gray-400">Status:</span>
                  <span class="px-2 py-1 rounded text-xs orbitron font-bold ${
                    task.status === 'approved' ? 'bg-green-500' : 'bg-red-500'
                  } ml-2">
                    ${task.status.toUpperCase()}
                  </span>
                </div>
              </div>
            </div>
            
            <!-- Overall Score -->
            <div class="bg-gradient-to-r from-green-500/20 to-cyan-500/20 border-2 border-green-500 rounded-lg p-6 text-center">
              <h3 class="text-gray-400 text-sm mb-2">OVERALL SCORE</h3>
              <div class="text-7xl font-bold orbitron text-green-400 mb-2">${task.review.overallScore}</div>
              <p class="text-gray-300">out of 100</p>
            </div>
            
            <!-- Detailed Scores -->
            <div class="grid md:grid-cols-3 gap-4">
              <div class="neon-border card-gradient rounded-lg p-4">
                <h4 class="text-cyan-300 font-bold orbitron text-sm mb-2">QUALITY</h4>
                <div class="text-4xl font-bold orbitron text-cyan-400 mb-2">${task.review.qualityScore}</div>
                <div class="bg-black/50 rounded-full h-2 overflow-hidden">
                  <div class="bg-cyan-400 h-full" style="width: ${task.review.qualityScore}%"></div>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-lg p-4">
                <h4 class="text-purple-300 font-bold orbitron text-sm mb-2">ACCURACY</h4>
                <div class="text-4xl font-bold orbitron text-purple-400 mb-2">${task.review.accuracyScore}</div>
                <div class="bg-black/50 rounded-full h-2 overflow-hidden">
                  <div class="bg-purple-400 h-full" style="width: ${task.review.accuracyScore}%"></div>
                </div>
              </div>
              
              <div class="neon-border card-gradient rounded-lg p-4">
                <h4 class="text-green-300 font-bold orbitron text-sm mb-2">COMPLETENESS</h4>
                <div class="text-4xl font-bold orbitron text-green-400 mb-2">${task.review.completenessScore}</div>
                <div class="bg-black/50 rounded-full h-2 overflow-hidden">
                  <div class="bg-green-400 h-full" style="width: ${task.review.completenessScore}%"></div>
                </div>
              </div>
            </div>
            
            <!-- AI Feedback -->
            <div class="bg-cyan-500/20 border-2 border-cyan-500 rounded-lg p-6">
              <h3 class="text-cyan-300 font-bold orbitron mb-4 flex items-center gap-2">
                <span class="text-2xl">üí¨</span> AI FEEDBACK
              </h3>
              <p class="text-gray-300 leading-relaxed text-lg">${task.review.feedback}</p>
            </div>
            
            <!-- Submission Details -->
            <div class="bg-black/50 rounded-lg p-6 border border-cyan-500/30">
              <h3 class="text-cyan-300 font-bold orbitron mb-4">SUBMISSION DETAILS</h3>
              <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                <div>
                  <span class="text-gray-400">Word Count:</span>
                  <span class="text-white ml-2 font-bold">${task.review.wordCount}</span>
                </div>
                ${task.fileName ? `
                  <div>
                    <span class="text-gray-400">File:</span>
                    <span class="text-white ml-2">${task.fileName}</span>
                  </div>
                ` : ''}
              </div>
              <div class="bg-black/70 rounded-lg p-4 max-h-48 overflow-y-auto">
                <p class="text-gray-300 text-sm whitespace-pre-wrap">${task.submission.substring(0, 500)}${task.submission.length > 500 ? '...' : ''}</p>
              </div>
            </div>
            
            <!-- Payment Info -->
            <div class="bg-gradient-to-r from-green-500/20 to-purple-500/20 border-2 border-green-500 rounded-lg p-6">
              <h3 class="text-green-400 font-bold orbitron mb-4 text-center">PAYMENT DETAILS</h3>
              <div class="grid md:grid-cols-2 gap-6">
                <div class="text-center">
                  <p class="text-gray-400 text-sm mb-2">AMOUNT EARNED</p>
                  <p class="text-5xl font-bold orbitron text-green-400 mb-1">$${task.payment.toFixed(2)}</p>
                  <p class="text-xs text-gray-400">USD</p>
                </div>
                <div class="text-center">
                  <p class="text-gray-400 text-sm mb-2">EQUIVALENT TO</p>
                  <p class="text-5xl font-bold orbitron text-cyan-400 mb-1">${(task.payment * 130).toFixed(0)}</p>
                  <p class="text-xs text-gray-400">KSH</p>
                </div>
              </div>
            </div>
            
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="w-full bg-gray-600 hover:bg-gray-700 px-6 py-4 rounded-lg orbitron font-bold text-lg">
              CLOSE
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    function logout() {
      localStorage.removeItem('currentUser');
      currentUser = null;
      showToast('Logged out successfully', 'info');
      renderPage('landing');
    }
    
    // Web3Forms Email Integration
    async function sendEmailNotification(subject, data) {
      try {
        const response = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json'
          },
          body: JSON.stringify({
            access_key: '4d568274-521b-452a-a113-62eed5ad915b',
            subject: `Hurobotics - ${subject}`,
            from_name: 'Hurobotics Platform',
            ...data
          })
        });
        
        const result = await response.json();
        return result.success;
      } catch (error) {
        console.error('Email notification failed:', error);
        return false;
      }
    }
    
    // Initialize app
    initApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c84f939d3479bfc',t:'MTc3MDE1MzY0MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>